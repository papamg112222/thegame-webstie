<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gas Laws Game</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap');

  html, body {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Montserrat', sans-serif;
    background: #1a0a3a;
    overflow: hidden;
    color: white;
  }

  #particleCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 0;
    pointer-events: none;
  }

  /* MAIN MENU */
  #mainMenu {
    position: relative;
    z-index: 1;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: #ff5a5f;
  }

  #mainMenu h1 {
    font-weight: 600;
    font-size: 4rem;
    margin-bottom: 0.3em;
    letter-spacing: 5px;
  }

  #mainMenu h3 {
    font-weight: 300;
    font-size: 1.2rem;
    margin-bottom: 2em;
    letter-spacing: 2px;
    color: #ff7a7f;
  }

  #mainMenu button {
    background-color: #ff5a5f;
    border: none;
    border-radius: 50px;
    color: white;
    font-weight: 300;
    font-size: 1.5rem;
    padding: 16px 80px;
    margin: 12px 0;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(255, 90, 95, 0.4);
    transition: background-color 0.3s ease;
  }

  #mainMenu button:hover {
    background-color: #ff7a7f;
  }

  /* GAME MODES CONTAINERS */
  .gameMode {
    display: none;
    position: relative;
    z-index: 2;
    height: 100vh;
    padding: 20px;
    box-sizing: border-box;
    background: #111;
    color: white;
  }

  .gameMode.active {
    display: block;
  }

  /* Shared styles for balloons and molecule teller */
  .balloon-container {
    position: relative;
    width: 200px;
    height: 250px;
    margin: 20px auto;
  }
  .balloon {
    width: 100px;
    height: 150px;
    background: #ff5a5f;
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    margin: 0 auto;
    position: relative;
    transition: width 0.3s ease, height 0.3s ease;
  }
  .molecule-counter {
    position: absolute;
    top: 10px; left: 50%;
    transform: translateX(-50%);
    font-size: 48px;
    font-weight: 600;
    color: white;
    user-select: none;
    pointer-events: none;
    text-shadow: 0 0 10px rgba(255,255,255,0.7);
  }
  .molecule-teller-bg {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    user-select: none;
    opacity: 0.1;
    font-size: 200px;
    font-weight: 900;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    letter-spacing: 20px;
  }

  /* Slider styling */
  .slider-container {
    margin: 20px auto;
    width: 300px;
    color: #ff5a5f;
  }
  .slider-container label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
  }
  input[type=range] {
    width: 100%;
  }

  /* Pop animation */
  @keyframes popAnimation {
    0% { transform: scale(1); opacity: 1;}
    50% { transform: scale(1.4); opacity: 0.8;}
    100% { transform: scale(0); opacity: 0;}
  }
  .pop {
    animation: popAnimation 0.5s forwards;
  }

  /* Nice button for Avogadro size increase */
  .avogadro-increase-btn {
    background-color: #ff5a5f;
    border: none;
    border-radius: 30px;
    color: white;
    font-size: 1.3rem;
    padding: 12px 30px;
    cursor: pointer;
    box-shadow: 0 3px 7px rgba(255, 90, 95, 0.5);
    transition: background-color 0.3s ease;
    margin: 10px auto;
    display: block;
  }
  .avogadro-increase-btn:hover {
    background-color: #ff7a7f;
  }

  /* Game mode headings */
  .gameMode h2 {
    text-align: center;
    font-weight: 600;
    color: #ff5a5f;
    margin-bottom: 15px;
  }

</style>
</head>
<body>

<canvas id="particleCanvas"></canvas>

<!-- MAIN MENU -->
<div id="mainMenu">
  <h1>GAS LAWS GAME</h1>
  <h3>Main Menu</h3>
  <button onclick="startGame('boyle')">Boyle's Law</button>
  <button onclick="startGame('charles')">Charles' Law</button>
  <button onclick="startGame('gayLussac')">Gay-Lussac's Law</button>
  <button onclick="startGame('avogadro')">Avogadro's Law</button>
</div>

<!-- BOYLE'S LAW -->
<div id="boyle" class="gameMode">
  <h2>Boyle's Law Mode</h2>

  <div class="slider-container">
    <label for="boyleVolume">Volume (V): <span id="boyleVolumeVal">50</span></label>
    <input type="range" id="boyleVolume" min="10" max="100" value="50" />
  </div>
  <div class="slider-container">
    <label for="boyleMass">Mass (m): <span id="boyleMassVal">1</span></label>
    <input type="range" id="boyleMass" min="1" max="10" value="1" step="0.1" />
  </div>
  <div class="slider-container">
    <label for="boyleTemp">Temperature (T): <span id="boyleTempVal">20</span> °C</label>
    <input type="range" id="boyleTemp" min="0" max="100" value="20" />
  </div>

  <div class="balloon-container">
    <div id="boyleBalloon" class="balloon"></div>
  </div>
</div>

<!-- CHARLES' LAW -->
<div id="charles" class="gameMode">
  <h2>Charles' Law Mode</h2>

  <div class="balloon-container" style="position: relative;">
    <div id="charlesBalloon" class="balloon"></div>
    <div class="molecule-teller-bg" id="charlesMoleculeBg">100</div>
  </div>

  <div class="slider-container">
    <label for="charlesTemp">Temperature (T): <span id="charlesTempVal">20</span> °C</label>
    <input type="range" id="charlesTemp" min="0" max="100" value="20" />
  </div>
</div>

<!-- GAY-LUSSAC'S LAW -->
<div id="gayLussac" class="gameMode">
  <h2>Gay-Lussac's Law Mode</h2>

  <div class="balloon-container">
    <div id="gayLussacBalloon" class="balloon"></div>
  </div>

  <div class="slider-container">
    <label for="gayLussacPressure">Pressure (P): <span id="gayLussacPressureVal">1</span></label>
    <input type="range" id="gayLussacPressure" min="1" max="10" value="1" />
  </div>
  <div class="slider-container">
    <label for="gayLussacTemp">Temperature (T): <span id="gayLussacTempVal">20</span> °C</label>
    <input type="range" id="gayLussacTemp" min="0" max="100" value="20" />
  </div>
</div>

<!-- AVOGADRO'S LAW -->
<div id="avogadro" class="gameMode">
  <h2>Avogadro's Law Mode</h2>

  <div class="balloon-container" style="position: relative;">
    <div id="avogadroBalloon" class="balloon"></div>
    <div class="molecule-teller-bg" id="avogadroMoleculeBg">0</div>
    <div class="molecule-counter" id="avogadroMoleculeCount">0</div>
  </div>
  <button id="increaseMoleculeBtn" class="avogadro-increase-btn">Add Molecules</button>
</div>

<script>
  // --- Particle background animation ---
  const canvas = document.getElementById('particleCanvas');
  const ctx = canvas.getContext('2d');
  let width, height;
  let particles = [];

  function initParticles() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    particles = [];
    for(let i = 0; i < 80; i++) {
      particles.push({
        x: Math.random() * width,
        y: Math.random() * height,
        radius: Math.random() * 6 + 2,
        speedY: (Math.random() * 1.5) + 0.5,
        speedX: (Math.random() - 0.5) * 0.5,
        color: '#ff5a5f',
        alpha: Math.random() * 0.5 + 0.3,
        type: Math.random() > 0.5 ? 'circle' : 'atom'
      });
    }
  }

  function drawAtom(x, y, radius) {
    ctx.strokeStyle = '#ff7a7f';
    ctx.lineWidth = 1.2;
    // nucleus
    ctx.beginPath();
    ctx.arc(x, y, radius * 0.6, 0, Math.PI * 2);
    ctx.fillStyle = 'rgba(255,122,127,0.8)';
    ctx.fill();
    ctx.closePath();
    // orbits
    ctx.beginPath();
    ctx.ellipse(x, y, radius*1.2, radius*0.5, 0, 0, Math.PI*2);
    ctx.stroke();
    ctx.beginPath();
    ctx.ellipse(x, y, radius*0.5, radius*1.2, Math.PI/4, 0, Math.PI*2);
    ctx.stroke();
  }

  function animateParticles() {
    ctx.clearRect(0, 0, width, height);

    particles.forEach(p => {
      p.y += p.speedY;
      p.x += p.speedX;

      if(p.y - p.radius > height) p.y = -p.radius;
      if(p.x - p.radius > width) p.x = -p.radius;
      if(p.x + p.radius < 0) p.x = width + p.radius;

      ctx.globalAlpha = p.alpha;

      if(p.type === 'circle') {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI*2);
        ctx.fillStyle = p.color;
        ctx.fill();
        ctx.closePath();
      } else {
        drawAtom(p.x, p.y, p.radius);
      }
    });

    ctx.globalAlpha = 1;
    requestAnimationFrame(animateParticles);
  }

  window.addEventListener('resize', () => {
    initParticles();
  });

  initParticles();
  animateParticles();

  // --- Game mode switching ---
  const modes = ['boyle', 'charles', 'gayLussac', 'avogadro'];
  const mainMenu = document.getElementById('mainMenu');

  function startGame(mode) {
    // Hide main menu
    mainMenu.style.display = 'none';

    // Show selected mode container
    modes.forEach(m => {
      document.getElementById(m).classList.remove('active');
    });
    document.getElementById(mode).classList.add('active');

    if(mode === 'boyle') {
      setupBoyle();
    } else if(mode === 'charles') {
      setupCharles();
    } else if(mode === 'gayLussac') {
      setupGayLussac();
    } else if(mode === 'avogadro') {
      setupAvogadro();
    }
  }

  // --- BOYLE'S LAW ---

  const boyleVolumeSlider = document.getElementById('boyleVolume');
  const boyleMassSlider = document.getElementById('boyleMass');
  const boyleTempSlider = document.getElementById('boyleTemp');
  const boyleVolumeVal = document.getElementById('boyleVolumeVal');
  const boyleMassVal = document.getElementById('boyleMassVal');
  const boyleTempVal = document.getElementById('boyleTempVal');
  const boyleBalloon = document.getElementById('boyleBalloon');

  // Simulate ball speed based on temperature (higher temp -> faster)
  let boyleBallSpeed = 1;

  function setupBoyle() {
    boyleVolumeSlider.value = 50;
    boyleMassSlider.value = 1;
    boyleTempSlider.value = 20;
    boyleVolumeVal.textContent = boyleVolumeSlider.value;
    boyleMassVal.textContent = boyleMassSlider.value;
    boyleTempVal.textContent = boyleTempSlider.value;

    boyleBallSpeed = 1;

    boyleVolumeSlider.oninput = () => {
      boyleVolumeVal.textContent = boyleVolumeSlider.value;
      updateBoyleBalloon();
    };
    boyleMassSlider.oninput = () => {
      boyleMassVal.textContent = parseFloat(boyleMassSlider.value).toFixed(1);
      updateBoyleBalloon();
    };
    boyleTempSlider.oninput = () => {
      boyleTempVal.textContent = boyleTempSlider.value;
      boyleBallSpeed = 0.5 + boyleTempSlider.value / 100; // Speed linked to temp
      updateBoyleBalloon();
    };

    // Initialize balloon size etc
    updateBoyleBalloon();
  }

  function updateBoyleBalloon() {
    // For Boyle's law: P*V = constant (ignoring constant here)
    // We'll adjust balloon size based on volume slider
    let volume = boyleVolumeSlider.value;
    // Balloon size scales with volume
    let sizeW = 50 + volume * 1.5;
    let sizeH = 75 + volume * 2;

    boyleBalloon.style.width = sizeW + 'px';
    boyleBalloon.style.height = sizeH + 'px';

    // You can add ball speed effects or animation here
    // For demo: change balloon's background shade based on speed/temp
    let temp = boyleTempSlider.value;
    boyleBalloon.style.backgroundColor = `rgba(255, 90, 95, ${0.5 + temp/200})`;
  }

  // --- CHARLES' LAW ---
  const charlesTempSlider = document.getElementById('charlesTemp');
  const charlesTempVal = document.getElementById('charlesTempVal');
  const charlesBalloon = document.getElementById('charlesBalloon');
  const charlesMoleculeBg = document.getElementById('charlesMoleculeBg');

  function setupCharles() {
    charlesTempSlider.value = 20;
    charlesTempVal.textContent = 20;

    charlesTempSlider.oninput = () => {
      charlesTempVal.textContent = charlesTempSlider.value;
      updateCharlesBalloon();
    };

    updateCharlesBalloon();
  }

  function updateCharlesBalloon() {
    // Charles Law: volume proportional to temp
    let temp = parseInt(charlesTempSlider.value);
    let volume = 50 + temp * 2.5;

    charlesBalloon.style.width = volume + 'px';
    charlesBalloon.style.height = (volume * 1.5) + 'px';

    // Show molecule teller behind balloon
    charlesMoleculeBg.textContent = Math.floor(volume / 2);
  }

  // --- GAY-LUSSAC'S LAW ---
  const gayLussacPressureSlider = document.getElementById('gayLussacPressure');
  const gayLussacPressureVal = document.getElementById('gayLussacPressureVal');
  const gayLussacTempSlider = document.getElementById('gayLussacTemp');
  const gayLussacTempVal = document.getElementById('gayLussacTempVal');
  const gayLussacBalloon = document.getElementById('gayLussacBalloon');

  function setupGayLussac() {
    gayLussacPressureSlider.value = 1;
    gayLussacPressureVal.textContent = 1;
    gayLussacTempSlider.value = 20;
    gayLussacTempVal.textContent = 20;

    gayLussacPressureSlider.oninput = () => {
      gayLussacPressureVal.textContent = gayLussacPressureSlider.value;
      updateGayLussacBalloon();
    };
    gayLussacTempSlider.oninput = () => {
      gayLussacTempVal.textContent = gayLussacTempSlider.value;
      updateGayLussacBalloon();
    };

    updateGayLussacBalloon();
  }

  function updateGayLussacBalloon() {
    // Gay-Lussac: P/T = constant (simplified)
    let pressure = parseFloat(gayLussacPressureSlider.value);
    let temp = parseInt(gayLussacTempSlider.value);

    // Balloon size changes with pressure (simulate expansion/contraction)
    let baseSize = 100;
    let size = baseSize * pressure / (temp + 273); // simplified

    if (size < 50) size = 50;
    if (size > 150) size = 150;

    gayLussacBalloon.style.width = size + 'px';
    gayLussacBalloon.style.height = (size * 1.5) + 'px';

    // Balloon color changes with pressure for visual feedback
    let colorIntensity = Math.min(1, pressure / 10);
    gayLussacBalloon.style.backgroundColor = `rgba(255, ${90 + colorIntensity * 100}, 95, 0.8)`;
  }

  // --- AVOGADRO'S LAW ---

  const avogadroBalloon = document.getElementById('avogadroBalloon');
  const avogadroMoleculeCount = document.getElementById('avogadroMoleculeCount');
  const avogadroMoleculeBg = document.getElementById('avogadroMoleculeBg');
  const increaseMoleculeBtn = document.getElementById('increaseMoleculeBtn');

  let moleculeCount = 0;

  function setupAvogadro() {
    moleculeCount = 0;
    avogadroMoleculeCount.textContent = moleculeCount;
    avogadroMoleculeBg.textContent = moleculeCount * 10;

    avogadroBalloon.style.width = '100px';
    avogadroBalloon.style.height = '150px';
    avogadroBalloon.style.backgroundColor = '#ff5a5f';

    increaseMoleculeBtn.onclick = () => {
      moleculeCount++;
      avogadroMoleculeCount.textContent = moleculeCount;
      avogadroMoleculeBg.textContent = moleculeCount * 10;
      animateAvogadroBalloon();
    };
  }

  function animateAvogadroBalloon() {
    avogadroBalloon.classList.add('pop');
    setTimeout(() => {
      avogadroBalloon.classList.remove('pop');
      // Increase size slightly after pop
      let w = parseInt(avogadroBalloon.style.width);
      let h = parseInt(avogadroBalloon.style.height);

      avogadroBalloon.style.width = (w + 10) + 'px';
      avogadroBalloon.style.height = (h + 15) + 'px';
    }, 500);
  }

</script>
</body>
</html>
