<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gas Laws Game</title>
  <style>
    /* (unmodified main menu styles) */
    html, body { margin:0; padding:0; height:100%; font-family:Montserrat,sans-serif; background:#1a0a3a; overflow:hidden; color:white; }
    #particleCanvas { position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none; }
    #mainMenu { position:relative; z-index:1; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; }
    #mainMenu h1,#mainMenu h3,#mainMenu button {/*...same...*/}

    .gameMode { display:none; position:relative; z-index:2; height:100vh; padding:20px; background:#111; overflow:auto; box-sizing:border-box; color:white; flex-direction:column; }
    .container { background:#222; border-radius:12px; padding:20px; width:350px; position:relative; margin:20px auto; display:flex; flex-direction:column; align-items:center; }
    .return-btn { margin-top:15px; padding:10px 20px; font-size:16px; background:#ff5a5f; border:none; border-radius:5px; cursor:pointer; }

    .slider-container { margin:15px 0; width:300px; color:#ff5a5f; }
    input[type=range]{width:100%;}

    .balloon-container { position:relative; width:250px; height:250px; margin:10px auto; display:flex; justify-content:center; align-items:center; }
    .balloon { background:#ff5a5f; border-radius:50%/60%; transition:width 0.3s, height 0.3s, opacity 0.3s; position:absolute; }
    .molecule-teller-bg { position:absolute; top:10px; left:50%; transform:translateX(-50%); font-size:180px; opacity:0.1; font-weight:900; letter-spacing:20px; }
    .molecule-counter { position:absolute; top:60px; left:50%; transform:translateX(-50%); font-size:48px; font-weight:600; }
    .avogadro-increase-btn {/* same as before */}

    @keyframes popAnimation { 0%{transform:scale(1);opacity:1;}50%{transform:scale(1.4);opacity:0.8;}100%{transform:scale(0);opacity:0;} }
    .pop { animation:popAnimation 0.5s forwards; }
  </style>
</head>
<body>
  <canvas id="particleCanvas"></canvas>

  <!-- MAIN MENU (no changes) -->
  <div id="mainMenu">
    <h1>GAS LAWS GAME</h1><h3>Choose your mode</h3>
    <button onclick="showMode('boyle')">Boyle's Law</button>
    <button onclick="showMode('charles')">Charles' Law</button>
    <button onclick="showMode('gayLussac')">Gay‑Lussac's Law</button>
    <button onclick="showMode('avogadro')">Avogadro's Law</button>
    <button id="memberBtn">Member</button>
  </div>

  <!-- BOYLE MODE -->
  <div id="boyle" class="gameMode" style="display:flex;">
    <div class="container">
      <h2>Boyle's Law</h2>
      <div class="slider-container">
        <label>Mass: <span id="boyleMassVal">5</span></label>
        <input type="range" id="boyleMass" min="1" max="20" step="1" value="5">
      </div>
      <div class="slider-container">
        <label>Temperature: <span id="boyleTempVal">20</span></label>
        <input type="range" id="boyleTemp" min="0" max="100" value="20">
      </div>
      <canvas id="boyleCanvas" width="300" height="300" style="background:#222;border-radius:12px;"></canvas>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- CHARLES MODE -->
  <div id="charles" class="gameMode">
    <div class="container">
      <h2>Charles' Law</h2>
      <div class="balloon-container">
        <div id="charlesBalloon" class="balloon" style="width:100px; height:150px; background:rgba(255,90,95,0.4);"></div>
        <div id="charlesMoleculeBg" class="molecule-teller-bg">20</div>
      </div>
      <div class="slider-container">
        <label>Temperature: <span id="charlesTempVal">20</span></label>
        <input type="range" id="charlesTemp" min="0" max="100" value="20">
      </div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- GAY-LUSSAC MODE -->
  <div id="gayLussac" class="gameMode">
    <div class="container">
      <h2>Gay‑Lussac's Law</h2>
      <div class="balloon-container">
        <div id="gayLussacBalloon" class="balloon" style="width:150px; height:225px;"></div>
      </div>
      <div class="slider-container">
        <label>Temperature: <span id="gayLussacTempVal">20</span></label>
        <input type="range" id="gayLussacTemp" min="0" max="100" value="20">
      </div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- AVOGADRO MODE -->
  <div id="avogadro" class="gameMode">
    <div class="container">
      <h2>Avogadro's Law</h2>
      <div class="balloon-container">
        <div id="avogadroBalloon" class="balloon" style="width:100px;height:150px;background:rgba(255,90,95,0.6);"></div>
        <div id="avogadroMoleculeBg" class="molecule-teller-bg">0</div>
        <div id="avogadroMoleculeCount" class="molecule-counter">0</div>
      </div>
      <button id="increaseMoleculeBtn" class="avogadro-increase-btn">Increase Mass</button>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <audio id="popSound" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>

  <script>
    // Particle animation
    const canvas = document.getElementById('particleCanvas'), ctx = canvas.getContext('2d');
    let particles = [];
    function initParticles() {
      canvas.width = width = window.innerWidth;
      canvas.height = height = window.innerHeight;
      particles = Array.from({length:80}, () => ({
          x: Math.random()*width, y: Math.random()*height,
          r: Math.random()*6+2,
          speedY: Math.random()*1.5+0.5,
          speedX: (Math.random()-0.5)*0.5,
          color:'#ff5a5f', alpha:Math.random()*0.5+0.3,
          type: Math.random()>0.5 ? 'circle' : 'atom'
        })
      );
    }
    function drawAtom(x,y,r){
      ctx.strokeStyle='#ff7a7f'; ctx.lineWidth=1.2;
      ctx.beginPath(); ctx.arc(x,y,r*0.6,0,2*Math.PI);ctx.fillStyle='rgba(255,122,127,0.8)';ctx.fill();ctx.closePath();
      ctx.beginPath();ctx.ellipse(x,y,r*1.2,r*0.5,0,0,2*Math.PI);ctx.stroke();
      ctx.beginPath();ctx.ellipse(x,y,r*0.5,r*1.2,Math.PI/4,0,2*Math.PI);ctx.stroke();
    }
    function animateParticles(){
      ctx.clearRect(0,0,width,height);
      particles.forEach(p=>{
        p.y+=p.speedY; p.x+=p.speedX;
        if(p.y-p.r>height) p.y=-p.r;
        if(p.x-p.r>width) p.x=-p.r;
        if(p.x+p.r<0) p.x=width+p.r;
        ctx.globalAlpha=p.alpha;
        if(p.type==='circle'){
          ctx.beginPath();
          ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
          ctx.fillStyle=p.color;
          ctx.fill();
        } else drawAtom(p.x,p.y,p.r);
        ctx.globalAlpha=1;
      });
      requestAnimationFrame(animateParticles);
    }
    window.addEventListener('resize', initParticles);
    initParticles(); animateParticles();

    // Mode handling
    const modes = ['boyle','charles','gayLussac','avogadro'];
    function showMode(mode){
      document.getElementById('mainMenu').style.display='none';
      modes.forEach(m=>{
        document.getElementById(m).style.display=(m===mode?'flex':'none');
      });
      if(mode==='boyle') initBoyle();
      if(mode==='charles') initCharles();
      if(mode==='gayLussac') initGayLussac();
      if(mode==='avogadro') initAvogadro();
    }
    function returnToMenu(){
      document.getElementById('mainMenu').style.display='flex';
      modes.forEach(m=>document.getElementById(m).style.display='none');
      cancelBoyle(); cancelAvogadro();
    }

    document.getElementById('memberBtn').addEventListener('click', ()=>{
      alert('name');
    });

    // Boyle
    const bMass = document.getElementById('boyleMass'),
          bTemp = document.getElementById('boyleTemp'),
          bMassVal = document.getElementById('boyleMassVal'),
          bTempVal = document.getElementById('boyleTempVal'),
          bCanvas = document.getElementById('boyleCanvas'),
          bctx = bCanvas.getContext('2d');
    let bBalls=[], bAni;
    function initBoyle(){
      bMassVal.textContent=bMass.value;
      bTempVal.textContent=bTemp.value;
      bMass.oninput = () => { bMassVal.textContent=bMass.value; resetBoyle(); };
      bTemp.oninput = () => { bTempVal.textContent=bTemp.value; resetBoyle(); };
      resetBoyle();
    }
    function resetBoyle(){
      cancelBoyle();
      bBalls=[];
      const count = parseInt(bMass.value)*5;
      const speedFactor = parseInt(bTemp.value)/20;
      for(let i=0;i<count;i++){
        bBalls.push({ x:Math.random()*300, y:Math.random()*300, r:6,
          vx:(Math.random()-0.5)*speedFactor, vy:(Math.random()-0.5)*speedFactor });
      }
      animateBoyle();
    }
    function animateBoyle(){
      bctx.clearRect(0,0,300,300);
      bBalls.forEach(ball=>{
        ball.x+=ball.vx; ball.y+=ball.vy;
        if(ball.x<ball.r||ball.x>300-ball.r) ball.vx*=-1;
        if(ball.y<ball.r||ball.y>300-ball.r) ball.vy*=-1;
        bctx.beginPath();
        bctx.arc(ball.x,ball.y,ball.r,0,2*Math.PI);
        bctx.fillStyle='#ff5a5f';
        bctx.fill();
      });
      bAni = requestAnimationFrame(animateBoyle);
    }
    function cancelBoyle(){
      cancelAnimationFrame(bAni);
    }

    // Charles
    const cTemp = document.getElementById('charlesTemp'),
          cTempVal=document.getElementById('charlesTempVal'),
          cBalloon=document.getElementById('charlesBalloon'),
          cBg = document.getElementById('charlesMoleculeBg');
    function initCharles(){
      updateCharles();
      cTemp.oninput = updateCharles;
    }
    function updateCharles(){
      const t = parseInt(cTemp.value);
      cTempVal.textContent=t;
      const w=100+40*(t/100), h=150+60*(t/100);
      cBalloon.style.width=w+'px';
      cBalloon.style.height=h+'px';
      cBg.textContent=t;
    }

    // Gay-Lussac
    const gTemp=document.getElementById('gayLussacTemp'),
          gTempVal=document.getElementById('gayLussacTempVal'),
          gBalloon=document.getElementById('gayLussacBalloon');
    function initGayLussac(){
      updateGay();
      gTemp.oninput=updateGay;
    }
    function updateGay(){
      const t=parseInt(gTemp.value);
      gTempVal.textContent=t;
      const w=150+30*(t/100), h=225+45*(t/100);
      gBalloon.style.width=w+'px';
      gBalloon.style.height=h+'px';
    }

    // Avogadro
    const aBalloon=document.getElementById('avogadroBalloon'),
          aBg=document.getElementById('avogadroMoleculeBg'),
          aCount=document.getElementById('avogadroMoleculeCount'),
          incBtn=document.getElementById('increaseMoleculeBtn'),
          popSoundElem=document.getElementById('popSound');
    let aCountNum=0, aInt;
    function initAvogadro(){
      aCountNum=0;
      aBalloon.style.width='100px';
      aBalloon.style.height='150px';
      aBg.textContent='0';
      aCount.textContent='0';
      incBtn.onmousedown=startInc;
      incBtn.onmouseup=stopInc;
      incBtn.onmouseleave=stopInc;
    }
    function startInc(){
      stepInc();
      aInt=setInterval(stepInc,200);
    }
    function stopInc(){
      clearInterval(aInt);
    }
    function stepInc(){
      if(aCountNum>=25) return; // slower growth until ~25 then stops increasing
      aCountNum++;
      aBg.textContent=aCountNum;
      aCount.textContent=aCountNum;
      const w = 100 + aCountNum*4;
      const h = 150 + aCountNum*6;
      aBalloon.style.width=w+'px';
      aBalloon.style.height=h+'px';
      if(aCountNum>=25){
        aBalloon.classList.add('pop');
        popSoundElem.currentTime=0; popSoundElem.play();
        setTimeout(()=>{
          aBalloon.classList.remove('pop');
          aCountNum=0;
          initAvogadro();
        },600);
      }
    }
    function cancelAvogadro(){
      clearInterval(aInt);
    }
  </script>
</body>
</html>
