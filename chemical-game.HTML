<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gas Laws Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap');

    /* Base styles & main menu */
    html, body { margin:0; padding:0; height:100%; font-family:'Montserrat',sans-serif; background:#1a0a3a; overflow:hidden; color:white; }
    #particleCanvas { position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none; }
    #mainMenu { position:relative; z-index:1; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; }
    #mainMenu h1 { font-weight:600; font-size:4rem; margin-bottom:0.3em; letter-spacing:5px; color:#ff5a5f; }
    #mainMenu h3 { font-weight:300; font-size:1.2rem; margin-bottom:2em; color:#ff7a7f; }
    #mainMenu button {
      background:#ff5a5f;
      border:none;
      border-radius:50px;
      color:white;
      font-size:1.5rem;
      padding:16px 80px;
      margin:12px 0;
      cursor:pointer;
      box-shadow:0 4px 8px rgba(255,90,95,0.4);
      transition:background-color .3s;
    }
    #mainMenu button:hover { background:#ff7a7f; }

    /* Gameplay screens */
    .gameMode {
      display:none;
      position:relative;
      z-index:2;
      height:100vh;
      padding:20px;
      background:#111;
      overflow:auto;
      box-sizing:border-box;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* Boyle container bigger and spaced from return button */
    #boyle .container {
      background: #222;
      border-radius: 12px;
      padding: 20px;
      width: 350px;
      height: 450px; /* increased height */
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      margin-bottom: 20px; /* spacing below container so return button won't overlap */
    }

    .return-btn {
      margin-top: 0; /* remove default margin */
      padding: 10px 20px;
      font-size: 16px;
      background: #ff5a5f;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      align-self: center;
      width: 140px;
      z-index: 10;
    }

    /* Shared game elements */
    .slider-container { margin: 15px 0; width: 300px; color:#ff5a5f; }
    .slider-container label { display: block; margin-bottom: 6px; font-weight: 600; }
    input[type=range] { width: 100%; }
    .balloon-container {
      position: relative;
      width: 250px;
      height: 250px;
      margin: 10px auto;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .balloon {
      border-radius: 50% / 60%;
      transition: width 0.3s, height 0.3s, background-color 0.3s;
      position: relative;
      z-index: 10;
    }
    .molecule-teller-bg, .molecule-counter {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      text-shadow: 0 0 10px rgba(255,255,255,0.7);
      user-select: none;
      font-weight: 900;
      z-index: 1;
    }
    .molecule-teller-bg {
      font-size: 180px;
      font-weight: 900;
      opacity: 0.1;
      letter-spacing: 20px;
    }
    .molecule-counter {
      font-size: 48px;
      font-weight: 600;
      top: 60px;
    }

    /* Charles balloon: less transparent and added a slight shadow to make it more visible */
    #charlesBalloon {
      background-color: rgba(255, 90, 95, 0.4) !important; /* from 0.1 to 0.4 */
      box-shadow: 0 0 15px rgba(255, 90, 95, 0.6);
    }

    /* Avogadro specifics */
    .avogadro-increase-btn {
      background:#ff5a5f;
      border:none;
      border-radius:30px;
      color:white;
      font-size:1.3rem;
      padding:12px 30px;
      cursor:pointer;
      display:block;
      margin: 10px auto 0 auto;
      box-shadow:0 3px 7px rgba(255,90,95,0.5);
      transition:background-color .3s;
      user-select: none;
    }
    .avogadro-increase-btn:hover { background:#ff7a7f; }

    @keyframes popAnimation {
      0%{transform:scale(1);opacity:1;}
      50%{transform:scale(1.4);opacity:0.8;}
      100%{transform:scale(0);opacity:0;}
    }
    .pop {
      animation: popAnimation 0.5s forwards;
    }

  </style>
</head>
<body>

  <canvas id="particleCanvas"></canvas>

  <!-- MAIN MENU -->
  <div id="mainMenu">
    <h1>GAS LAWS GAME</h1>
    <h3>Choose your mode</h3>
    <button onclick="showMode('boyle')">Boyle's Law</button>
    <button onclick="showMode('charles')">Charles' Law</button>
    <button onclick="showMode('gayLussac')">Gay‑Lussac's Law</button>
    <button onclick="showMode('avogadro')">Avogadro's Law</button>
    <button id="memberBtn">Member</button>
  </div>

  <!-- BOYLE -->
  <div id="boyle" class="gameMode">
    <div class="container">
      <h2>Boyle's Law</h2>
      <div class="slider-container">
        <label>Mass: <span id="boyleMassVal">5</span></label>
        <input type="range" id="boyleMass" min="1" max="20" step="1" value="5">
      </div>
      <div class="slider-container">
        <label>Temperature (°C): <span id="boyleTempVal">20</span></label>
        <input type="range" id="boyleTemp" min="0" max="100" value="20">
      </div>
      <canvas id="boyleCanvas" width="250" height="250" style="background:#222; border-radius:12px;"></canvas>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- CHARLES -->
  <div id="charles" class="gameMode">
    <div class="container" style="position: relative;">
      <h2>Charles' Law</h2>
      <div class="balloon-container" style="justify-content:center; align-items:center; height:180px;">
        <div id="charlesBalloon" class="balloon" style="width:100px; height:150px;"></div>
        <div id="charlesMoleculeBg" class="molecule-teller-bg">0</div>
      </div>
      <div class="slider-container">
        <label>Temperature (°C): <span id="charlesTempVal">20</span></label>
        <input type="range" id="charlesTemp" min="0" max="100" value="20">
      </div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- GAY-LUSSAC -->
  <div id="gayLussac" class="gameMode">
    <div class="container">
      <h2>Gay‑Lussac's Law</h2>
      <div class="balloon-container"><div id="gayLussacBalloon" class="balloon" style="width: 150px; height: 225px;"></div></div>
      <div class="slider-container"><label>Pressure (P): <span id="gayLussacPressureVal">1</span></label><input type="range" id="gayLussacPressure" min="1" max="10" value="1"></div>
      <div class="slider-container"><label>Temperature (°C): <span id="gayLussacTempVal">20</span></label><input type="range" id="gayLussacTemp" min="0" max="100" value="20"></div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- AVOGADRO -->
  <div id="avogadro" class="gameMode">
    <div class="container">
      <h2>Avogadro's Law</h2>
      <div class="balloon-container">
        <div id="avogadroBalloon" class="balloon" style="width: 120px; height: 180px; background-color: rgba(255,90,95,0.5);"></div>
        <div class="molecule-teller-bg">888</div>
        <div id="avogadroMoleculeCounter" class="molecule-counter">0</div>
      </div>
      <button id="avogadroIncreaseBtn" class="avogadro-increase-btn">Add Molecule</button>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

<script>
  const mainMenu = document.getElementById('mainMenu');
  const modes = {
    boyle: document.getElementById('boyle'),
    charles: document.getElementById('charles'),
    gayLussac: document.getElementById('gayLussac'),
    avogadro: document.getElementById('avogadro')
  };

  function showMode(name) {
    mainMenu.style.display = 'none';
    for (const mode in modes) {
      modes[mode].style.display = 'none';
    }
    modes[name].style.display = 'flex';
  }

  function returnToMenu() {
    for (const mode in modes) {
      modes[mode].style.display = 'none';
    }
    mainMenu.style.display = 'flex';
  }

  // MEMBER button behavior: prompt for name and display inside button
  const memberBtn = document.getElementById('memberBtn');
  memberBtn.addEventListener('click', () => {
    const name = prompt('Please enter your name:');
    if (name && name.trim() !== '') {
      memberBtn.textContent = name.trim();
    }
  });

  // Boyle sliders & canvas
  const boyleMass = document.getElementById('boyleMass');
  const boyleTemp = document.getElementById('boyleTemp');
  const boyleMassVal = document.getElementById('boyleMassVal');
  const boyleTempVal = document.getElementById('boyleTempVal');
  const boyleCanvas = document.getElementById('boyleCanvas');
  const boyleCtx = boyleCanvas.getContext('2d');

  function drawBoyle() {
    boyleCtx.clearRect(0,0,boyleCanvas.width,boyleCanvas.height);
    // Draw container rectangle
    boyleCtx.strokeStyle = '#ff5a5f';
    boyleCtx.lineWidth = 3;
    boyleCtx.strokeRect(30, 30, 190, 190);

    // Draw a piston based on mass & temperature
    // For example piston height inversely proportional to mass, temp affects color

    const pistonHeight = 160 - (boyleMass.value * 6);
    const tempRatio = boyleTemp.value / 100;
    const pistonColor = `rgba(255, 90, 95, ${0.4 + 0.6 * tempRatio})`;

    boyleCtx.fillStyle = pistonColor;
    boyleCtx.fillRect(50, 30 + pistonHeight, 150, 20);

    // Draw some gas molecules as circles inside container
    const moleculeCount = Math.floor(boyleMass.value * 3);
    for(let i=0; i<moleculeCount; i++) {
      const x = 40 + Math.random()*170;
      const y = 40 + Math.random()*pistonHeight;
      boyleCtx.beginPath();
      boyleCtx.fillStyle = 'rgba(255,255,255,0.7)';
      boyleCtx.arc(x, y, 6, 0, Math.PI*2);
      boyleCtx.fill();
    }
  }

  boyleMass.addEventListener('input', () => {
    boyleMassVal.textContent = boyleMass.value;
    drawBoyle();
  });
  boyleTemp.addEventListener('input', () => {
    boyleTempVal.textContent = boyleTemp.value;
    drawBoyle();
  });
  drawBoyle();

  // Charles balloon scaling and slider
  const charlesTemp = document.getElementById('charlesTemp');
  const charlesTempVal = document.getElementById('charlesTempVal');
  const charlesBalloon = document.getElementById('charlesBalloon');
  const charlesMoleculeBg = document.getElementById('charlesMoleculeBg');

  function updateCharles() {
    charlesTempVal.textContent = charlesTemp.value;
    // Balloon size proportional to temperature (0-100 => scale 0.5 to 1.5)
    const scale = 0.5 + charlesTemp.value / 100;
    charlesBalloon.style.width = (100 * scale) + 'px';
    charlesBalloon.style.height = (150 * scale) + 'px';

    // Molecule background number scales with temp * 5 (for visual effect)
    charlesMoleculeBg.textContent = Math.round(charlesTemp.value * 5);
  }

  charlesTemp.addEventListener('input', updateCharles);
  updateCharles();

  // Gay-Lussac (for completeness)
  const gayLussacPressure = document.getElementById('gayLussacPressure');
  const gayLussacTemp = document.getElementById('gayLussacTemp');
  const gayLussacPressureVal = document.getElementById('gayLussacPressureVal');
  const gayLussacTempVal = document.getElementById('gayLussacTempVal');
  const gayLussacBalloon = document.getElementById('gayLussacBalloon');

  function updateGayLussac() {
    gayLussacPressureVal.textContent = gayLussacPressure.value;
    gayLussacTempVal.textContent = gayLussacTemp.value;
    // Balloon height proportional to pressure and temperature for demo
    const baseWidth = 150;
    const baseHeight = 225;
    const width = baseWidth * (gayLussacPressure.value / 10);
    const height = baseHeight * (gayLussacTemp.value / 100 + 0.5);
    gayLussacBalloon.style.width = width + 'px';
    gayLussacBalloon.style.height = height + 'px';
    gayLussacBalloon.style.backgroundColor = `rgba(255,90,95,0.5)`;
  }

  gayLussacPressure.addEventListener('input', updateGayLussac);
  gayLussacTemp.addEventListener('input', updateGayLussac);
  updateGayLussac();

  // Avogadro: add molecule button
  const avogadroIncreaseBtn = document.getElementById('avogadroIncreaseBtn');
  const avogadroMoleculeCounter = document.getElementById('avogadroMoleculeCounter');
  const avogadroBalloon = document.getElementById('avogadroBalloon');

  let moleculeCount = 0;

  avogadroIncreaseBtn.addEventListener('click', () => {
    moleculeCount++;
    avogadroMoleculeCounter.textContent = moleculeCount;
    // Increase balloon size slightly with molecule count
    const baseWidth = 120;
    const baseHeight = 180;
    const maxMolecules = 20;
    let scale = 1 + Math.min(moleculeCount, maxMolecules) * 0.05;
    avogadroBalloon.style.width = (baseWidth * scale) + 'px';
    avogadroBalloon.style.height = (baseHeight * scale) + 'px';
  });

  // Particle background
  const canvas = document.getElementById('particleCanvas');
  const ctx = canvas.getContext('2d');
  let particlesArray = [];

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);

  class Particle {
    constructor() {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
      this.size = Math.random() * 2 + 1;
      this.speedX = (Math.random() - 0.5) * 0.5;
      this.speedY = (Math.random() - 0.5) * 0.5;
      this.color = 'rgba(255, 90, 95, 0.3)';
    }
    update() {
      this.x += this.speedX;
      this.y += this.speedY;
      if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
      if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
    }
    draw() {
      ctx.beginPath();
      ctx.fillStyle = this.color;
      ctx.shadowColor = 'rgba(255,90,95,0.6)';
      ctx.shadowBlur = 5;
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  function initParticles() {
    particlesArray = [];
    for (let i = 0; i < 120; i++) {
      particlesArray.push(new Particle());
    }
  }

  function animateParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particlesArray.forEach(p => {
      p.update();
      p.draw();
    });
    requestAnimationFrame(animateParticles);
  }

  initParticles();
  animateParticles();
</script>

</body>
</html>
