<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gas Laws Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap');

    html, body { margin:0; padding:0; height:100%; font-family:'Montserrat',sans-serif; background:#1a0a3a; overflow:hidden; color:white; }
    #particleCanvas { position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none; }

    #mainMenu {
      position:relative; z-index:1; height:100vh;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
    }
    #mainMenu h1 { font-weight:600; font-size:4rem; margin-bottom:0.3em; letter-spacing:5px; color:#ff5a5f; }
    #mainMenu h3 { font-weight:300; font-size:1.2rem; margin-bottom:2em; color:#ff7a7f; }
    #mainMenu button {
      background:#ff5a5f;
      border:none;
      border-radius:50px;
      color:white;
      font-size:1.5rem;
      padding:16px 80px;
      margin:12px 0;
      cursor:pointer;
      box-shadow:0 4px 8px rgba(255,90,95,0.4);
      transition:background-color .3s;
    }
    #mainMenu button:hover { background:#ff7a7f; }

    .gameMode {
      display:none;
      position:relative;
      z-index:2;
      height:100vh;
      padding:20px;
      background:#111;
      overflow:auto;
      box-sizing:border-box;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* Boyle container bigger and spaced from return button */
    #boyle .container {
      background: #222;
      border-radius: 12px;
      padding: 20px;
      width: 350px;
      height: 450px; /* increased height */
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      margin-bottom: 20px; /* spacing below container so return button won't overlap */
    }

    .return-btn {
      margin-top: 0; /* remove default margin */
      padding: 10px 20px;
      font-size: 16px;
      background: #ff5a5f;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      align-self: center;
      width: 140px;
      z-index: 10;
    }

    .slider-container { margin: 15px 0; width: 300px; color:#ff5a5f; }
    .slider-container label { display: block; margin-bottom: 6px; font-weight: 600; }
    input[type=range] { width: 100%; }

    /* Balloon container styling */
    .balloon-container {
      position: relative;
      width: 250px;
      height: 250px;
      margin: 10px auto;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .balloon {
      border-radius: 50% / 60%;
      transition: width 0.3s, height 0.3s, background-color 0.3s;
      position: relative;
      z-index: 10;
    }
    .molecule-teller-bg, .molecule-counter {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      text-shadow: 0 0 10px rgba(255,255,255,0.7);
      user-select: none;
      font-weight: 900;
      z-index: 1;
    }
    .molecule-teller-bg {
      font-size: 180px;
      font-weight: 900;
      opacity: 0.1;
      letter-spacing: 20px;
    }
    .molecule-counter {
      font-size: 48px;
      font-weight: 600;
      top: 60px;
    }

    /* Charles balloon - 75% transparent */
    #charlesBalloon {
      background-color: rgba(255, 90, 95, 0.25) !important; /* 75% transparent */
      box-shadow: 0 0 15px rgba(255, 90, 95, 0.4);
    }

    /* Avogadro balloon - 75% transparent */
    #avogadroBalloon {
      background-color: rgba(255, 90, 95, 0.25) !important;
    }

    /* Avogadro button above container with 1cm margin, return button below container with 1cm margin */
    #avogadro .container {
      position: relative;
      background: #222;
      border-radius: 12px;
      padding: 20px;
      width: 350px;
      height: 300px;
      margin-bottom: 10px; /* small margin bottom for spacing return button */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    #avogadroIncreaseBtn {
      position: relative;
      bottom: 10px; /* place button above container by 1cm approx */
      margin-bottom: 1cm;
      width: auto;
      font-size: 1.3rem;
      background:#ff5a5f;
      border:none;
      border-radius:30px;
      color:white;
      padding:12px 30px;
      cursor:pointer;
      box-shadow:0 3px 7px rgba(255,90,95,0.5);
      transition:background-color .3s;
      user-select: none;
    }
    #avogadroIncreaseBtn:hover { background:#ff7a7f; }

    #avogadro .return-btn {
      margin-top: 1cm;
      width: 150px;
    }

    /* Member game styling */
    #memberGame .box {
      width: 300px;
      height: 300px;
      background: linear-gradient(135deg, #ff5a5f, #ff7a7f);
      border-radius: 12px;
      position: relative;
      margin-bottom: 20px;
    }
    #memberGame .line {
      position: absolute;
      width: 2px;
      height: 100%;
      background: rgba(255,255,255,0.2);
    }
    #memberGame .line:nth-child(1) { left: 10%; }
    #memberGame .line:nth-child(2) { left: 25%; }
    #memberGame .line:nth-child(3) { left: 40%; }
    #memberGame .line:nth-child(4) { left: 55%; }
    #memberGame .line:nth-child(5) { left: 70%; }
    #memberGame .line:nth-child(6) { left: 85%; }

  </style>
</head>
<body>
  <canvas id="particleCanvas"></canvas>

  <div id="mainMenu">
    <h1>Gas Laws Game</h1>
    <h3>Learn Boyle, Charles, Gay-Lussac & Avogadro</h3>
    <button onclick="showMode('boyle')">Boyle's Law</button>
    <button onclick="showMode('charles')">Charles' Law</button>
    <button onclick="showMode('gayLussac')">Gay-Lussac's Law</button>
    <button onclick="showMode('avogadro')">Avogadro's Law</button>
    <button id="memberBtn">Member Area</button>
  </div>

  <div id="boyle" class="gameMode">
    <div class="container">
      <canvas id="boyleCanvas" width="250" height="350" style="border-radius:12px; background:#222;"></canvas>

      <div class="slider-container">
        <label for="boyleMass">Mass (Pressure)</label>
        <input type="range" min="5" max="30" id="boyleMass" value="15" />
        <span id="boyleMassVal">15</span>
      </div>

      <div class="slider-container">
        <label for="boyleTemp">Temperature</label>
        <input type="range" min="20" max="60" id="boyleTemp" value="30" />
        <span id="boyleTempVal">30</span>
      </div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <div id="charles" class="gameMode">
    <h2>Charles' Law</h2>
    <div class="balloon-container">
      <div id="charlesBalloon" class="balloon" style="width:150px; height:200px; background-color: rgba(255, 90, 95, 0.25); box-shadow: 0 0 15px rgba(255, 90, 95, 0.4);"></div>
      <div class="molecule-teller-bg">100</div>
      <div class="molecule-counter">100</div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <div id="gayLussac" class="gameMode">
    <h2>Gay-Lussac's Law</h2>
    <div class="balloon-container">
      <div id="gayLussacBalloon" class="balloon" style="width:150px; height:200px; background-color: rgba(255, 90, 95, 0.25); box-shadow: 0 0 15px rgba(255, 90, 95, 0.4);"></div>
      <div class="molecule-teller-bg">100</div>
      <div class="molecule-counter">100</div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <div id="avogadro" class="gameMode">
    <button id="avogadroIncreaseBtn">Increase Molecules</button>
    <div class="container">
      <h2>Avogadro's Law</h2>
      <canvas id="avogadroCanvas" width="250" height="250" style="background:#222; border-radius:12px;"></canvas>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <div id="memberGame" class="gameMode">
    <h2>Member Area</h2>
    <div class="box">
      <div class="line"></div>
      <div class="line"></div>
      <div class="line"></div>
      <div class="line"></div>
      <div class="line"></div>
      <div class="line"></div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <script>
    // Main menu show/hide logic
    function showMode(mode) {
      document.getElementById('mainMenu').style.display = 'none';
      const modes = ['boyle','charles','gayLussac','avogadro','memberGame'];
      modes.forEach(m => {
        document.getElementById(m).style.display = 'none';
      });
      document.getElementById(mode).style.display = 'flex';
      if (mode === 'boyle') initBoyle();
      if (mode === 'avogadro') initAvogadro();
    }
    function returnToMenu() {
      const modes = ['boyle','charles','gayLussac','avogadro','memberGame'];
      modes.forEach(m => {
        document.getElementById(m).style.display = 'none';
      });
      document.getElementById('mainMenu').style.display = 'flex';
      // stop any animations if needed
      stopBoyle();
      stopAvogadro();
    }

    // Boyle's Law animation
    let boyleInterval;
    const boyleCanvas = document.getElementById('boyleCanvas');
    const boyleCtx = boyleCanvas.getContext('2d');

    document.getElementById('boyleMass').addEventListener('input', e => {
      document.getElementById('boyleMassVal').textContent = e.target.value;
      drawBoyle(parseInt(e.target.value), parseInt(document.getElementById('boyleTemp').value));
    });
    document.getElementById('boyleTemp').addEventListener('input', e => {
      document.getElementById('boyleTempVal').textContent = e.target.value;
      drawBoyle(parseInt(document.getElementById('boyleMass').value), parseInt(e.target.value));
    });

    function initBoyle() {
      drawBoyle(parseInt(document.getElementById('boyleMass').value), parseInt(document.getElementById('boyleTemp').value));
    }
    function stopBoyle() {
      clearInterval(boyleInterval);
    }
    function drawBoyle(mass, temp) {
      boyleCtx.clearRect(0, 0, boyleCanvas.width, boyleCanvas.height);
      // Draw container
      boyleCtx.fillStyle = '#333';
      boyleCtx.fillRect(30, 50, 190, 150);
      // Draw piston based on mass (simulate pressure)
      let pistonHeight = 150 - mass * 5;
      boyleCtx.fillStyle = '#ff5a5f';
      boyleCtx.fillRect(30, pistonHeight + 50, 190, 10);
      // Draw molecules as circles
      let moleculesCount = Math.min(20, mass + temp / 10);
      boyleCtx.fillStyle = '#ff5a5f';
      for (let i = 0; i < moleculesCount; i++) {
        let x = 40 + Math.random() * 170;
        let y = 55 + Math.random() * (pistonHeight - 10);
        boyleCtx.beginPath();
        boyleCtx.arc(x, y, 7, 0, Math.PI * 2);
        boyleCtx.fill();
      }
    }

    // Avogadro's Law animation
    let avogadroMolecules = 50;
    let avogadroCanvas = document.getElementById('avogadroCanvas');
    let avogadroCtx = avogadroCanvas.getContext('2d');
    let avogadroAnimation;

    document.getElementById('avogadroIncreaseBtn').addEventListener('click', () => {
      avogadroMolecules = Math.min(200, avogadroMolecules + 10);
      drawAvogadro();
    });

    function initAvogadro() {
      drawAvogadro();
    }
    function stopAvogadro() {
      cancelAnimationFrame(avogadroAnimation);
    }

    function drawAvogadro() {
      avogadroCtx.clearRect(0, 0, avogadroCanvas.width, avogadroCanvas.height);
      // Draw container
      avogadroCtx.strokeStyle = '#ff5a5f';
      avogadroCtx.lineWidth = 3;
      avogadroCtx.strokeRect(10, 10, 230, 230);
      // Draw molecules as circles
      avogadroCtx.fillStyle = 'rgba(255,90,95,0.6)';
      for (let i = 0; i < avogadroMolecules; i++) {
        let x = 15 + Math.random() * 220;
        let y = 15 + Math.random() * 220;
        avogadroCtx.beginPath();
        avogadroCtx.arc(x, y, 6, 0, Math.PI * 2);
        avogadroCtx.fill();
      }
    }

    // Particle background effect (falling atoms)
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');
    let width, height;

    function resize() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
    }
    window.addEventListener('resize', resize);
    resize();

    class AtomParticle {
      constructor() {
        this.reset();
      }
      reset() {
        this.x = Math.random() * width;
        this.y = Math.random() * -height; // start above view
        this.size = 15 + Math.random() * 5; // nucleus size
        this.speedY = 0.4 + Math.random() * 0.3; // slow fall
        this.angle = Math.random() * Math.PI * 2;
        this.rotationSpeed = 0.01 + Math.random() * 0.015;
        this.color = 'rgba(255, 80, 90, 0.9)'; // pinkish red color
        this.electronAngles = [Math.random()*Math.PI*2, Math.random()*Math.PI*2, Math.random()*Math.PI*2];
        this.electronOrbitRadii = [this.size * 1.8, this.size * 2.2, this.size * 2.6];
      }
      update() {
        this.y += this.speedY;
        this.angle += this.rotationSpeed;
        for(let i=0; i<3; i++){
          this.electronAngles[i] += this.rotationSpeed * (1 + i*0.4);
        }
        if (this.y - this.size > height) {
          this.reset();
          this.y = -this.size;
        }
      }
      draw(ctx) {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.angle);

        // nucleus glow
        let gradient = ctx.createRadialGradient(0, 0, this.size*0.3, 0, 0, this.size);
        gradient.addColorStop(0, 'rgba(255,120,130,1)');
        gradient.addColorStop(1, 'rgba(255,40,50,0)');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(0, 0, this.size, 0, Math.PI*2);
        ctx.fill();

        // nucleus core
        ctx.fillStyle = 'rgba(255, 80, 90, 1)';
        ctx.beginPath();
        ctx.arc(0, 0, this.size*0.5, 0, Math.PI*2);
        ctx.fill();

        // draw 3 elliptical orbits
        ctx.strokeStyle = 'rgba(255, 80, 90, 0.6)';
        ctx.lineWidth = 1.5;
        for(let i=0; i<3; i++){
          ctx.beginPath();
          ctx.ellipse(0, 0, this.electronOrbitRadii[i], this.electronOrbitRadii[i]*0.5, i * Math.PI/3, 0, Math.PI*2);
          ctx.stroke();
        }

        // draw electrons (small glowing dots moving on each orbit)
        for(let i=0; i<3; i++){
          let angle = this.electronAngles[i];
          let orbitX = this.electronOrbitRadii[i] * Math.cos(angle);
          let orbitY = this.electronOrbitRadii[i] * 0.5 * Math.sin(angle);
          // electron glow
          let grad = ctx.createRadialGradient(orbitX, orbitY, 0, orbitX, orbitY, this.size*0.3);
          grad.addColorStop(0, 'rgba(255,150,160,0.9)');
          grad.addColorStop(1, 'rgba(255,80,90,0)');
          ctx.fillStyle = grad;
          ctx.beginPath();
          ctx.arc(orbitX, orbitY, this.size*0.4, 0, Math.PI*2);
          ctx.fill();
          // electron core
          ctx.fillStyle = 'rgba(255, 120, 130, 1)';
          ctx.beginPath();
          ctx.arc(orbitX, orbitY, this.size*0.2, 0, Math.PI*2);
          ctx.fill();
        }

        ctx.restore();
      }
    }

    const particles = [];
    for(let i=0; i<18; i++){
      particles.push(new AtomParticle());
    }

    function animateParticles() {
      ctx.clearRect(0, 0, width, height);
      particles.forEach(p => {
        p.update();
        p.draw(ctx);
      });
      requestAnimationFrame(animateParticles);
    }
    animateParticles();

  </script>
</body>
</html>
