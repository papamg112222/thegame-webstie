<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gas Laws Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap');

    html, body { margin:0; padding:0; height:100%; font-family:'Montserrat',sans-serif; background:#1a0a3a; overflow:hidden; color:white; }
    #particleCanvas { position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none; }

    #mainMenu {
      position:relative; z-index:1; height:100vh;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
    }
    #mainMenu h1 { font-weight:600; font-size:4rem; margin-bottom:0.3em; letter-spacing:5px; color:#ff5a5f; }
    #mainMenu h3 { font-weight:300; font-size:1.2rem; margin-bottom:2em; color:#ff7a7f; }
    #mainMenu button {
      background:#ff5a5f; border:none; border-radius:50px; color:white;
      font-size:1.5rem; padding:16px 80px; margin:12px 0;
      cursor:pointer; box-shadow:0 4px 8px rgba(255,90,95,0.4);
      transition:background-color .3s;
    }
    #mainMenu button:hover { background:#ff7a7f; }

    .gameMode {
      display:none; position:relative; z-index:2; height:100vh;
      padding:20px; background:#111; overflow:auto; box-sizing:border-box;
      color:white; display:flex; flex-direction:column; align-items:center; justify-content:center;
    }
    .return-btn {
      margin-top:20px; padding:10px 20px; font-size:16px;
      background:#ff5a5f; color:white; border:none; border-radius:5px;
      cursor:pointer; width:160px;
    }
    .slider-container { margin:15px 0; color:#ff5a5f; }
    canvas { border-radius:12px; background:#222; }

  </style>
</head>
<body>
  <canvas id="particleCanvas"></canvas>

  <div id="mainMenu" class="gameMode" style="display:flex;">
    <h1>Gas Laws Game</h1>
    <h3>Learn Boyle, Charles, Gayâ€‘Lussac & Avogadro</h3>
    <button onclick="showMode('boyle')">Boyle's Law</button>
    <button onclick="showMode('charles')">Charles' Law</button>
    <button onclick="showMode('gayLussac')">Gayâ€‘Lussac's Law</button>
    <button onclick="showMode('avogadro')">Avogadro's Law</button>
    <button onclick="showMode('memberGame')">Member Area</button>
  </div>

  <!-- Boyle -->
  <div id="boyle" class="gameMode">
    <canvas id="boyleCanvas" width="300" height="300"></canvas>
    <div class="slider-container">
      Mass: <span id="boyleMassVal">15</span>
      <input type="range" id="boyleMass" min="5" max="30" value="15">
    </div>
    <div class="slider-container">
      Temperature: <span id="boyleTempVal">30</span>
      <input type="range" id="boyleTemp" min="20" max="60" value="30">
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- Charles -->
  <div id="charles" class="gameMode">
    <canvas id="charlesCanvas" width="300" height="300"></canvas>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- Gay-Lussac -->
  <div id="gayLussac" class="gameMode">
    <canvas id="gayCanvas" width="300" height="300"></canvas>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- Avogadro -->
  <div id="avogadro" class="gameMode">
    <canvas id="avogadroCanvas" width="300" height="300"></canvas>
    <div class="slider-container">
      Molecules: <span id="avCount">50</span>
      <input type="range" id="avSlider" min="0" max="200" value="50">
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- Member -->
  <div id="memberGame" class="gameMode">
    <h2 style="color:#ff5a5f">Member Area</h2>
    <div class="box" style="width:300px;height:300px;background:linear-gradient(135deg,#ff5a5f,#ff7a7f);border-radius:12px;position:relative;margin-bottom:20px;">
      <div class="line" style="position:absolute;width:2px;height:100%;background:rgba(255,255,255,0.2);left:10%;"></div>
      <div class="line" style="position:absolute;width:2px;height:100%;background:rgba(255,255,255,0.2);left:25%;"></div>
      <div class="line" style="position:absolute;width:2px;height:100%;background:rgba(255,255,255,0.2);left:40%;"></div>
      <div class="line" style="position:absolute;width:2px;height:100%;background:rgba(255,255,255,0.2);left:55%;"></div>
      <div class="line" style="position:absolute;width:2px;height:100%;background:rgba(255,255,255,0.2);left:70%;"></div>
      <div class="line" style="position:absolute;width:2px;height:100%;background:rgba(255,255,255,0.2);left:85%;"></div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <script>
    const modes = ['boyle','charles','gayLussac','avogadro','memberGame'];

    function showMode(mode) {
      document.getElementById('mainMenu').style.display = 'none';
      modes.forEach(m => document.getElementById(m).style.display = 'none');
      document.getElementById(mode).style.display = 'flex';
      if (mode === 'boyle') startBoyle();
      if (mode === 'charles') startCharles();
      if (mode === 'gayLussac') startGayLussac();
      if (mode === 'avogadro') startAvogadro();
    }

    function returnToMenu() {
      modes.forEach(m => document.getElementById(m).style.display = 'none');
      document.getElementById('mainMenu').style.display = 'flex';
      stopAnimations();
    }

    // Boyle
    const bCtx = document.getElementById('boyleCanvas').getContext('2d');
    let boyleInterval;
    function drawBoyle() {
      const mass = +document.getElementById('boyleMass').value;
      const temp = +document.getElementById('boyleTemp').value;
      document.getElementById('boyleMassVal').textContent = mass;
      document.getElementById('boyleTempVal').textContent = temp;
      bCtx.clearRect(0,0,300,300);
      bCtx.strokeStyle = '#ff5a5f';
      bCtx.strokeRect(30,50,240,200);
      const pistonY = 50 + 200 - mass*4;
      bCtx.fillStyle = '#ff5a5f';
      bCtx.fillRect(30,pistonY,240,10);
      let count = Math.min(20, mass + temp/10);
      bCtx.fillStyle = '#ff5a5f';
      for(let i=0; i<count; i++){
        const x = 35 + Math.random()*230;
        const y = 55 + Math.random()*(pistonY-55);
        bCtx.beginPath();
        bCtx.arc(x,y,6,0,Math.PI*2);
        bCtx.fill();
      }
    }
    function startBoyle() {
      stopAnimations();
      drawBoyle();
      boyleInterval = setInterval(drawBoyle, 500);
    }

    // Charles
    const cCtx = document.getElementById('charlesCanvas').getContext('2d');
    let charlesAnim;
    function animateCharles() {
      cCtx.clearRect(0,0,300,300);
      const t = Date.now()/800;
      const size = 60 + Math.sin(t)*20;
      cCtx.fillStyle = 'rgba(255,90,95,0.4)';
      cCtx.beginPath();
      cCtx.arc(150,150,size,0,Math.PI*2);
      cCtx.fill();
      charlesAnim = requestAnimationFrame(animateCharles);
    }
    function startCharles() {
      stopAnimations();
      animateCharles();
    }

    // Gay-Lussac
    const gCtx = document.getElementById('gayCanvas').getContext('2d');
    let gayAnim;
    function animateGayLussac() {
      gCtx.clearRect(0,0,300,300);
      const t = Date.now()/800;
      const h = (Math.sin(t)+1)*75 + 50;
      gCtx.fillStyle = 'rgba(255,90,95,0.6)';
      gCtx.fillRect(120,300-h,60,h);
      gayAnim = requestAnimationFrame(animateGayLussac);
    }
    function startGayLussac() {
      stopAnimations();
      animateGayLussac();
    }

    // Avogadro
    const aCtx = document.getElementById('avogadroCanvas').getContext('2d');
    function drawAvogadro() {
      const c = +document.getElementById('avSlider').value;
      document.getElementById('avCount').textContent = c;
      aCtx.clearRect(0,0,300,300);
      aCtx.fillStyle = 'rgba(255,90,95,0.6)';
      for(let i=0;i<c;i++){
        const x = 20 + Math.random()*260;
        const y = 20 + Math.random()*260;
        aCtx.beginPath();
        aCtx.arc(x,y,5,0,Math.PI*2);
        aCtx.fill();
      }
    }
    function startAvogadro() {
      stopAnimations();
      drawAvogadro();
    }

    document.getElementById('boyleMass').oninput = drawBoyle;
    document.getElementById('boyleTemp').oninput = drawBoyle;
    document.getElementById('avSlider').oninput = drawAvogadro;

    // Stop all
    function stopAnimations() {
      clearInterval(boyleInterval);
      cancelAnimationFrame(charlesAnim);
      cancelAnimationFrame(gayAnim);
      cancelAnimationFrame(charlesAnim);
    }

    // ðŸŒŒ Falling Atoms Background
    const canvas = document.getElementById('particleCanvas');
    const ctxBg = canvas.getContext('2d');
    let W, H;
    function resize() {
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    class Atom {
      constructor() { this.reset(); }
      reset() {
        this.x = Math.random()*W;
        this.y = -Math.random()*H;
        this.size = 15 + Math.random()*10;
        this.speed = 0.1 + Math.random()*0.2;
        this.angle = Math.random()*Math.PI*2;
        this.rotSpeed = 0.002 + Math.random()*0.005;
        this.r = this.size;
      }
      update() {
        this.y += this.speed;
        this.angle += this.rotSpeed;
        if (this.y - this.r > H) this.reset();
      }
      draw() {
        ctxBg.save();
        ctxBg.translate(this.x, this.y);
        ctxBg.rotate(this.angle);
        // nucleus glow
        const grad = ctxBg.createRadialGradient(0,0,this.r*0.3,0,0,this.r);
        grad.addColorStop(0,'rgba(255,120,140,1)');
        grad.addColorStop(1,'rgba(255,40,60,0)');
        ctxBg.fillStyle = grad;
        ctxBg.beginPath();
        ctxBg.arc(0,0,this.r,0,Math.PI*2);
        ctxBg.fill();
        // electrons
        ctxBg.strokeStyle = 'rgba(255,80,90,0.6)';
        ctxBg.lineWidth = 1;
        const orbit = this.r * 1.5;
        for(let i=0;i<3;i++){
          const a = this.angle + i*2;
          ctxBg.beginPath();
          ctxBg.ellipse(0,0,orbit,orbit*0.4,i*Math.PI/3,0,2*Math.PI);
          ctxBg.stroke();
          const ex = orbit * Math.cos(a);
          const ey = orbit * 0.4 * Math.sin(a);
          ctxBg.fillStyle = 'rgba(255,150,160,0.9)';
          ctxBg.beginPath();
          ctxBg.arc(ex,ey,this.r*0.4,0,Math.PI*2);
          ctxBg.fill();
        }
        ctxBg.restore();
      }
    }

    const atoms = [];
    for (let i=0; i<20; i++) atoms.push(new Atom());

    function animBg() {
      ctxBg.clearRect(0,0,W,H);
      atoms.forEach(p => { p.update(); p.draw(); });
      requestAnimationFrame(animBg);
    }
    animBg();
  </script>
</body>
</html>
