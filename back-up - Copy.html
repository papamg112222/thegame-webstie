<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gas Laws Game</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap');
  html, body {
    margin:0; padding:0; height:100%; font-family:'Montserrat',sans-serif;
    background:#1a0a3a; overflow:hidden; color:white;
  }
  /* Particle canvas behind everything */
  #particleCanvas {
    position:fixed;
    top:0; left:0;
    width:100vw; height:100vh;
    z-index:0;
    pointer-events:none;
  }
  /* Main menu and modes container layering */
  #mainMenu, .gameMode {
    position: relative;
    z-index: 1;
    height: 100vh;
  }
  #mainMenu {
    display:flex; flex-direction:column; justify-content:center; align-items:center;
  }
  #mainMenu h1 {
    font-weight:600; font-size:4rem; margin-bottom:0.3em; letter-spacing:5px; color:#ff5a5f;
  }
  #mainMenu h3 {
    font-weight:300; font-size:1.2rem; margin-bottom:2em; color:#ff7a7f;
  }
  #mainMenu button {
    background:#ff5a5f; border:none; border-radius:50px; color:white;
    font-size:1.5rem; padding:16px 80px; margin:12px 0; cursor:pointer;
    box-shadow:0 4px 8px rgba(255,90,95,0.4); transition:background-color .3s;
  }
  #mainMenu button:hover {
    background:#ff7a7f;
  }
  .gameMode {
    display:none;
    padding:20px; background:#111; overflow:auto; box-sizing:border-box;
  }
  .return-btn {
    margin-top:20px; padding:10px 20px; font-size:16px;
    background:#ff5a5f; color:white; border:none; border-radius:5px; cursor:pointer;
    display:block; margin-left:auto; margin-right:auto;
  }
  /* Sliders styling */
  .slider-container {
    margin: 15px auto; width: 300px; color: #ff5a5f;
  }
  .slider-container label {
    display: block; margin-bottom: 6px; font-weight: 600;
  }
  input[type=range] {
    width: 100%;
  }
  /* Boyle Mode container and molecules */
  #boyleContainer {
    margin: 20px auto 10px auto;
    width: 500px; height: 350px;
    background: #222;
    border: 2px solid #ff5a5f;
    border-radius: 15px;
    position: relative;
    overflow: hidden;
  }
  .molecule {
    position: absolute;
    border-radius: 50%;
    background-color: #ff5a5f;
    box-shadow: 0 0 6px #ff7a7f;
    pointer-events:none;
  }
  /* Charles Mode container and balloon */
  #charlesContainer {
    margin: 20px auto 10px auto;
    width: 500px; height: 350px;
    background: #222;
    border: 2px solid #ff5a5f;
    border-radius: 15px;
    position: relative;
    overflow: hidden;
    user-select:none;
  }
  #charlesBalloon {
    position: absolute;
    left: 50%; bottom: 30px;
    width: 80px; height: 120px;
    background: #ff5a5f;
    border-radius: 50% / 70%;
    transform: translateX(-50%);
    opacity: 0.1;
    transition: width 0.2s ease, height 0.2s ease;
    box-shadow: 0 0 20px #ff5a5f88;
  }
  #charlesCounter {
    position: absolute;
    left: 50%; bottom: 10px;
    font-weight: 700; font-size: 2rem;
    color: #ff5a5f44;
    transform: translateX(-50%);
    user-select:none;
    pointer-events:none;
  }
  /* Avogadro Mode container and balloon */
  #avogadroContainer {
    margin: 20px auto 10px auto;
    width: 500px; height: 350px;
    background: #222;
    border: 2px solid #ff5a5f;
    border-radius: 15px;
    position: relative;
    overflow: hidden;
    user-select:none;
  }
  #avogadroBalloon {
    position: absolute;
    left: 50%; bottom: 30px;
    width: 80px; height: 120px;
    background: #ff5a5f;
    border-radius: 50% / 70%;
    transform: translateX(-50%);
    opacity: 0.7;
    box-shadow: 0 0 20px #ff5a5f88;
    transition: width 0.1s ease, height 0.1s ease;
  }
  #avogadroCounter {
    position: absolute;
    left: 50%; bottom: 10px;
    font-weight: 700; font-size: 2rem;
    color: #ff5a5f44;
    transform: translateX(-50%);
    user-select:none;
    pointer-events:none;
  }
  #avogadroControls {
    text-align: center;
    margin-top: 10px;
  }
  #increaseMassBtn {
    background:#ff5a5f;
    border:none;
    color:#fff;
    padding: 10px 30px;
    font-size: 16px;
    border-radius: 50px;
    cursor: pointer;
    user-select:none;
  }
  #increaseMassBtn:active {
    background:#ff7a7f;
  }
  /* Balloon pop animation */
  @keyframes popAnim {
    0% {transform: translateX(-50%) scale(1);}
    50% {transform: translateX(-50%) scale(1.4);}
    100% {transform: translateX(-50%) scale(0); opacity: 0;}
  }
</style>
</head>
<body>

<canvas id="particleCanvas"></canvas>

<!-- MAIN MENU -->
<div id="mainMenu">
  <h1>GAS LAWS GAME</h1>
  <h3>Choose your mode</h3>
  <button id="btnBoyle">Boyle's Law</button>
  <button id="btnCharles">Charles' Law</button>
  <button id="btnGayLussac">Gay‑Lussac's Law</button>
  <button id="btnAvogadro">Avogadro's Law</button>
</div>

<!-- BOYLE MODE -->
<div id="boyle" class="gameMode">
  <h2>Boyle's Law</h2>
  <div class="slider-container">
    <label for="boyleMass">Mass: <span id="boyleMassVal">5</span></label>
    <input type="range" id="boyleMass" min="1" max="50" step="1" value="5" />
  </div>
  <div class="slider-container">
    <label for="boyleTemp">Temperature: <span id="boyleTempVal">20</span> °C</label>
    <input type="range" id="boyleTemp" min="0" max="100" step="1" value="20" />
  </div>
  <div id="boyleContainer"></div>
  <button class="return-btn" id="boyleReturnBtn">Return to Menu</button>
</div>

<!-- CHARLES MODE -->
<div id="charles" class="gameMode">
  <h2>Charles' Law</h2>
  <div class="slider-container">
    <label for="charlesTemp">Temperature: <span id="charlesTempVal">20</span> °C</label>
    <input type="range" id="charlesTemp" min="0" max="100" step="1" value="20" />
  </div>
  <div id="charlesContainer">
    <div id="charlesBalloon"></div>
    <div id="charlesCounter">80</div>
  </div>
  <button class="return-btn" id="charlesReturnBtn">Return to Menu</button>
</div>

<!-- GAY-LUSSAC MODE placeholder -->
<div id="gayLussac" class="gameMode">
  <h2>Gay-Lussac's Law</h2>
  <p>Coming soon...</p>
  <button class="return-btn" id="gayLussacReturnBtn">Return to Menu</button>
</div>

<!-- AVOGADRO MODE -->
<div id="avogadro" class="gameMode">
  <h2>Avogadro's Law</h2>
  <div id="avogadroContainer">
    <div id="avogadroBalloon"></div>
    <div id="avogadroCounter">80</div>
  </div>
  <div id="avogadroControls">
    <button id="increaseMassBtn">Increase Mass</button>
  </div>
  <button class="return-btn" id="avogadroReturnBtn">Return to Menu</button>
</div>

<script>
  // === Particle animation ===
  const canvas = document.getElementById('particleCanvas'), ctx = canvas.getContext('2d');
  let particles = [], width, height;
  function initParticles() {
    width = window.innerWidth; height = window.innerHeight;
    canvas.width = width; canvas.height = height;
    particles = [];
    for (let i = 0; i < 80; i++) {
      particles.push({
        x: Math.random()*width,
        y: Math.random()*height,
        radius: Math.random()*6 + 2,
        speedY: Math.random()*1.5 + 0.5,
        speedX: (Math.random()-0.5)*0.5,
        color: '#ff5a5f',
        alpha: Math.random()*0.5 + 0.3,
        type: Math.random() > 0.5 ? 'circle' : 'atom'
      });
    }
  }
  function drawAtom(x, y, r) {
    ctx.strokeStyle = '#ff7a7f';
    ctx.lineWidth = 1.2;
    ctx.beginPath(); ctx.arc(x, y, r*0.6, 0, Math.PI*2);
    ctx.fillStyle = 'rgba(255,122,127,0.8)'; ctx.fill(); ctx.closePath();
    ctx.beginPath(); ctx.ellipse(x, y, r*1.2, r*0.5, 0, 0, Math.PI*2); ctx.stroke();
    ctx.beginPath(); ctx.ellipse(x, y, r*0.5, r*1.2, Math.PI/4, 0, Math.PI*2); ctx.stroke();
  }
  function animateParticles() {
    ctx.clearRect(0, 0, width, height);
    particles.forEach(p => {
      p.y += p.speedY;
      p.x += p.speedX;
      if (p.y - p.radius > height) p.y = -p.radius;
      if (p.x - p.radius > width) p.x = -p.radius;
      if (p.x + p.radius < 0) p.x = width + p.radius;
      ctx.globalAlpha = p.alpha;
      if (p.type === 'circle') {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI*2);
        ctx.fillStyle = p.color;
        ctx.fill();
      } else {
        drawAtom(p.x, p.y, p.radius);
      }
    });
    ctx.globalAlpha = 1;
    requestAnimationFrame(animateParticles);
  }
  window.addEventListener('resize', () => {
    initParticles();
  });
  initParticles();
  animateParticles();

  // === Mode navigation ===
  const modes = ['boyle', 'charles', 'gayLussac', 'avogadro'];
  function showMode(id) {
    document.getElementById('mainMenu').style.display = 'none';
    modes.forEach(m => {
      document.getElementById(m).style.display = (m === id) ? 'block' : 'none';
    });
    // Start/stop animations in each mode
    if(id === 'boyle') startBoyle();
    else stopBoyle();
    if(id === 'charles') startCharles();
    else stopCharles();
    if(id === 'avogadro') resetAvogadro();
  }
  function returnToMenu() {
    modes.forEach(m => {
      document.getElementById(m).style.display = 'none';
    });
    document.getElementById('mainMenu').style.display = 'flex';
    stopBoyle();
    stopCharles();
    resetAvogadro();
  }

  // Attach buttons
  document.getElementById('btnBoyle').onclick = () => showMode('boyle');
  document.getElementById('btnCharles').onclick = () => showMode('charles');
  document.getElementById('btnGayLussac').onclick = () => showMode('gayLussac');
  document.getElementById('btnAvogadro').onclick = () => showMode('avogadro');
  document.getElementById('boyleReturnBtn').onclick = returnToMenu;
  document.getElementById('charlesReturnBtn').onclick = returnToMenu;
  document.getElementById('gayLussacReturnBtn').onclick = returnToMenu;
  document.getElementById('avogadroReturnBtn').onclick = returnToMenu;

  // === BOYLE MODE ===
  const boyleMassSlider = document.getElementById('boyleMass');
  const boyleTempSlider = document.getElementById('boyleTemp');
  const boyleMassVal = document.getElementById('boyleMassVal');
  const boyleTempVal = document.getElementById('boyleTempVal');
  const boyleContainer = document.getElementById('boyleContainer');

  let boyleMolecules = [];
  let boyleAnimationId = null;

  function createMolecules(count) {
    boyleMolecules = [];
    boyleContainer.innerHTML = '';
    const containerRect = boyleContainer.getBoundingClientRect();
    for(let i=0; i<count; i++) {
      const mol = document.createElement('div');
      mol.className = 'molecule';
      mol.style.width = '16px';
      mol.style.height = '16px';
      mol.style.backgroundColor = '#ff5a5f';
      mol.style.left = (Math.random() * (containerRect.width - 16)) + 'px';
      mol.style.top = (Math.random() * (containerRect.height - 16)) + 'px';
      boyleContainer.appendChild(mol);
      boyleMolecules.push({
        el: mol,
        x: parseFloat(mol.style.left),
        y: parseFloat(mol.style.top),
        dx: (Math.random() * 1.5 + 0.5) * (Math.random() < 0.5 ? -1 : 1),
        dy: (Math.random() * 1.5 + 0.5) * (Math.random() < 0.5 ? -1 : 1),
      });
    }
  }
  function animateBoyle() {
    const containerRect = boyleContainer.getBoundingClientRect();
    boyleMolecules.forEach(m => {
      m.x += m.dx;
      m.y += m.dy;
      // Bounce off walls
      if (m.x < 0 || m.x > containerRect.width - 16) m.dx *= -1;
      if (m.y < 0 || m.y > containerRect.height - 16) m.dy *= -1;
      m.el.style.left = m.x + 'px';
      m.el.style.top = m.y + 'px';
    });
    boyleAnimationId = requestAnimationFrame(animateBoyle);
  }
  function startBoyle() {
    // Update displayed values
    boyleMassVal.textContent = boyleMassSlider.value;
    boyleTempVal.textContent = boyleTempSlider.value;
    // Create molecules count proportional to mass
    createMolecules(boyleMassSlider.value * 2); // Scale factor 2 for visual impact
    if(!boyleAnimationId) animateBoyle();
  }
  function stopBoyle() {
    if(boyleAnimationId) {
      cancelAnimationFrame(boyleAnimationId);
      boyleAnimationId = null;
    }
    boyleContainer.innerHTML = '';
  }
  boyleMassSlider.addEventListener('input', () => {
    boyleMassVal.textContent = boyleMassSlider.value;
    createMolecules(boyleMassSlider.value * 2);
  });
  boyleTempSlider.addEventListener('input', () => {
    boyleTempVal.textContent = boyleTempSlider.value;
  });

  // === CHARLES MODE ===
  const charlesTempSlider = document.getElementById('charlesTemp');
  const charlesTempVal = document.getElementById('charlesTempVal');
  const charlesBalloon = document.getElementById('charlesBalloon');
  const charlesCounter = document.getElementById('charlesCounter');

  let charlesTemp = 20;
  function updateCharles() {
    // Update balloon size and opacity with temperature
    let size = 80 + (charlesTemp - 20) * 2.5;
    if (size < 40) size = 40;
    if (size > 200) size = 200;
    charlesBalloon.style.width = size + 'px';
    charlesBalloon.style.height = (size * 1.5) + 'px';
    charlesBalloon.style.opacity = 0.1 + (charlesTemp - 0) / 100 * 0.6;
    charlesCounter.textContent = Math.round(size);
  }
  let charlesInterval = null;
  function startCharles() {
    charlesTemp = parseInt(charlesTempSlider.value);
    charlesTempVal.textContent = charlesTemp;
    updateCharles();
    charlesInterval = setInterval(() => {
      // Slowly increase temp for demo effect
      charlesTemp += 0.2;
      if(charlesTemp > 100) charlesTemp = 0;
      charlesTempSlider.value = charlesTemp.toFixed(0);
      charlesTempVal.textContent = charlesTemp.toFixed(0);
      updateCharles();
    }, 200);
  }
  function stopCharles() {
    if(charlesInterval) {
      clearInterval(charlesInterval);
      charlesInterval = null;
    }
  }
  charlesTempSlider.addEventListener('input', () => {
    charlesTemp = parseInt(charlesTempSlider.value);
    charlesTempVal.textContent = charlesTemp;
    updateCharles();
  });

  // === AVOGADRO MODE ===
  const avogadroBalloon = document.getElementById('avogadroBalloon');
  const avogadroCounter = document.getElementById('avogadroCounter');
  const increaseMassBtn = document.getElementById('increaseMassBtn');

  let avogadroMass = 1;
  function updateAvogadro() {
    let size = 80 + avogadroMass * 10;
    if (size > 300) size = 300;
    avogadroBalloon.style.width = size + 'px';
    avogadroBalloon.style.height = (size * 1.5) + 'px';
    avogadroCounter.textContent = avogadroMass;
  }
  function resetAvogadro() {
    avogadroMass = 1;
    updateAvogadro();
  }
  increaseMassBtn.addEventListener('click', () => {
    avogadroMass++;
    if (avogadroMass > 20) avogadroMass = 20;
    updateAvogadro();
  });

  // On load show main menu by default
  returnToMenu();

</script>
</body>
</html>
