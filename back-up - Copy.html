<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gas Laws Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap');
    html, body { margin:0; padding:0; height:100%; font-family:'Montserrat',sans-serif; background:#1a0a3a; overflow:hidden; color:white; }
    #particleCanvas { position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none; }
    #mainMenu { position:relative; z-index:1; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; }
    #mainMenu h1 { font-weight:600; font-size:4rem; margin-bottom:0.3em; letter-spacing:5px; color:#ff5a5f; }
    #mainMenu h3 { font-weight:300; font-size:1.2rem; margin-bottom:2em; color:#ff7a7f; }
    #mainMenu button { background:#ff5a5f; border:none; border-radius:50px; color:white; font-size:1.5rem;
      padding:16px 80px; margin:12px 0; cursor:pointer; box-shadow:0 4px 8px rgba(255,90,95,0.4); transition:background-color .3s; }
    #mainMenu button:hover { background:#ff7a7f; }

    .gameMode { display:none; position:relative; z-index:2; height:100vh; padding:20px; background:#111; overflow:auto;
      box-sizing:border-box; color:white; display:flex; flex-direction:column; align-items:center; justify-content:center; }

    .container { background:#222; border-radius:12px; padding:20px; width:350px; position:relative; display:flex;
      flex-direction:column; align-items:center; justify-content:center; }

    .return-btn { margin-top:20px; padding:10px 20px; font-size:16px; background:#ff5a5f; color:white; border:none;
      border-radius:5px; cursor:pointer; width:140px; z-index:10; }

    .slider-container { margin:15px 0; width:300px; color:#ff5a5f; }
    .slider-container label { display:block; margin-bottom:6px; font-weight:600; }
    input[type=range] { width:100%; }

    .balloon-container { position:relative; width:250px; height:250px; margin:10px auto;
      display:flex; justify-content:center; align-items:center; overflow:hidden; }

    .balloon { border-radius:50% / 60%; transition:width 0.3s, height 0.3s, background-color 0.3s; z-index:10; }

    .molecule-teller-bg, .molecule-counter { position:absolute; top:10px; left:50%; transform:translateX(-50%);
      text-shadow:0 0 10px rgba(255,255,255,0.7); user-select:none; font-weight:900; z-index:1; }
    .molecule-teller-bg { font-size:180px; opacity:0.1; letter-spacing:20px; }
    .molecule-counter { font-size:48px; top:60px; }

    /* Charles: 99% opaque */
    #charlesBalloon { background:rgba(255,90,95,0.99) !important; box-shadow:0 0 15px rgba(255,90,95,0.8); }

    /* Avogadro button spacing */
    #avogadroIncreaseBtn { margin-bottom:1cm; }

    #memberGame .box { width:300px; height:300px; border:2px solid #ff5a5f; display:flex; justify-content:space-around; }
    #memberGame .box .line { width:2px; background:#ff5a5f; margin:0 8px; }

    audio { display:none; }
  </style>
</head>
<body>
  <canvas id="particleCanvas"></canvas>
  <div id="mainMenu">
    <h1>GAS LAWS GAME</h1><h3>Choose your mode</h3>
    <button onclick="showMode('boyle')">Boyle's Law</button>
    <button onclick="showMode('charles')">Charles' Law</button>
    <button onclick="showMode('gayLussac')">Gay‑Lussac's Law</button>
    <button onclick="showMode('avogadro')">Avogadro's Law</button>
    <button id="memberBtn">Member</button>
  </div>

  <!-- Boyle -->
  <div id="boyle" class="gameMode">
    <div class="container" style="height:500px;"><h2>Boyle's Law</h2>
      <div class="slider-container"><label>Mass: <span id="bMass">5</span></label>
        <input type="range" id="bMassSlider" min="1" max="20" value="5"></div>
      <div class="slider-container"><label>Temperature: <span id="bTemp">20</span>°C</label>
        <input type="range" id="bTempSlider" min="0" max="100" value="20"></div>
      <canvas id="boyleCanvas" width="300" height="300" style="background:#333; border-radius:10px;"></canvas>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- Charles -->
  <div id="charles" class="gameMode">
    <div class="container" style="height:500px;"><h2>Charles' Law</h2>
      <div class="balloon-container">
        <div id="charlesBalloon" class="balloon"></div>
        <div id="cBg" class="molecule-teller-bg">0</div>
      </div>
      <div class="slider-container"><label>Temperature: <span id="cTemp">0</span>°C</label>
        <input type="range" id="cTempSlider" min="0" max="100" value="0"></div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- Gay-Lussac -->
  <div id="gayLussac" class="gameMode">
    <div class="container" style="height:500px;"><h2>Gay‑Lussac's Law</h2>
      <div class="balloon-container"><div id="gBalloon" class="balloon" style="background:rgba(255,90,95,0.5);"></div></div>
      <div class="slider-container"><label>Pressure: <span id="gPress">1</span></label>
        <input type="range" id="gPressSlider" min="1" max="10" value="1"></div>
      <div class="slider-container"><label>Temperature: <span id="gTemp">20</span>°C</label>
        <input type="range" id="gTempSlider" min="0" max="100" value="20"></div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- Avogadro -->
  <div id="avogadro" class="gameMode">
    <button id="avogadroIncreaseBtn" class="avogadro-increase-btn">Add Molecule</button>
    <div class="container" style="height:500px;"><h2>Avogadro's Law</h2>
      <div class="balloon-container"><div id="aBalloon" class="balloon"></div>
        <div id="aBg" class="molecule-teller-bg">0</div>
        <div id="aCount" class="molecule-counter">0</div>
      </div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
    <audio id="popSnd" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg" preload="auto"></audio>
  </div>

  <!-- Member -->
  <div id="memberGame" class="gameMode">
    <div class="box">
      <div class="line"></div><div class="line"></div><div class="line"></div>
      <div class="line"></div><div class="line"></div><div class="line"></div>
    </div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <script>
    // Particle background (atoms)
    const pC=document.getElementById('particleCanvas'),pCtx=pC.getContext('2d');
    let partArr=[];
    function initP(){pC.width=innerWidth;pC.height=innerHeight;partArr=[];for(let i=0;i<120;i++){partArr.push({x:Math.random()*pC.width,y:Math.random()*pC.height,r:Math.random()*3+1,sx:(Math.random()-0.5)*0.7,sy:(Math.random()-0.5)*0.7});}}
    function drawP(){pCtx.clearRect(0,0,pC.width,pC.height);partArr.forEach(p=>{p.x+=p.sx;p.y+=p.sy;if(p.x<0||p.x>pC.width)p.sx*=-1;if(p.y<0||p.y>pC.height)p.sy*=-1;
      pCtx.beginPath();pCtx.fillStyle='rgba(255,90,95,0.3)';pCtx.shadowColor='rgba(255,90,95,0.6)';pCtx.shadowBlur=4;pCtx.arc(p.x,p.y,p.r,0,2*Math.PI);pCtx.fill();
    });requestAnimationFrame(drawP);}
    window.addEventListener('resize',initP);
    initP(); drawP();

    // Mode handling
    const modes={boyle:document.getElementById('boyle'),charles:document.getElementById('charles'),
      gayLussac:document.getElementById('gayLussac'),avogadro:document.getElementById('avogadro'),
      memberGame:document.getElementById('memberGame')};
    function showMode(n){document.getElementById('mainMenu').style.display='none';Object.values(modes).forEach(m=>m.style.display='none');modes[n].style.display='flex';}
    function returnToMenu(){Object.values(modes).forEach(m=>m.style.display='none');document.getElementById('mainMenu').style.display='flex';}
    document.getElementById('memberBtn').onclick=()=>showMode('memberGame');

    // Boyle
    const bMassSl=document.getElementById('bMassSlider'), bTempSl=document.getElementById('bTempSlider'),
      bMassLbl=document.getElementById('bMass'), bTempLbl=document.getElementById('bTemp'),
      bCv=document.getElementById('boyleCanvas'), bCtx=bCv.getContext('2d');
    let bSpeed=2; let bBall={x:150,y:150,r:15,vx:2,vy:2};
    function bLoop(){
      bMassLbl.textContent=bMassSl.value; bTempLbl.textContent=bTempSl.value;
      let mass=+bMassSl.value, temp=+bTempSl.value;
      bBall.vx=(3*(100-temp)/100); bBall.vy=bBall.vx;
      bCtx.clearRect(0,0,300,300);
      bCtx.strokeStyle='#ff5a5f'; bCtx.lineWidth=3; bCtx.strokeRect(30,30,240,240);
      bCtx.beginPath(); bCtx.fillStyle='rgba(255,90,95,0.7)'; bCtx.shadowColor='rgba(255,90,95,0.6)'; bCtx.shadowBlur=8;
      bCtx.arc(bBall.x,bBall.y,bBall.r,0,2*Math.PI); bCtx.fill();
      bBall.x+=bBall.vx; bBall.y+=bBall.vy;
      if(bBall.x<=30+bBall.r || bBall.x>=270-bBall.r) bBall.vx*=-1;
      if(bBall.y<=30+bBall.r || bBall.y>=270-bBall.r) bBall.vy*=-1;
      requestAnimationFrame(bLoop);
    }
    bMassSl.oninput=bTempSl.oninput=()=>{}; bLoop();

    // Charles
    const cTempSL=document.getElementById('cTempSlider'), cTempL=document.getElementById('cTemp'),
      cBall=document.getElementById('charlesBalloon'), cBg=document.getElementById('cBg');
    function cUp(){
      let t=+cTempSL.value; cTempL.textContent=t; cBg.textContent=t;
      let scale=0.5 + t/100;
      cBall.style.width=100*scale+'px'; cBall.style.height=150*scale+'px';
    }
    cTempSL.oninput=cUp; cUp();

    // Gay-Lussac
    const gPressSL=document.getElementById('gPressSlider'), gTempSL=document.getElementById('gTempSlider'),
      gPressL=document.getElementById('gPress'), gTempL=document.getElementById('gTemp'),
      gBall=document.getElementById('gBalloon');
    function gUp(){
      gPressL.textContent=gPressSL.value; gTempL.textContent=gTempSL.value;
      let w=150*(+gPressSL.value/10), h=225*(+gTempSL.value/100+0.5);
      gBall.style.width=w+'px'; gBall.style.height=h+'px';
    }
    gPressSL.oninput=gTempSL.oninput=gUp; gUp();

    // Avogadro
    const aBtn=document.getElementById('avogadroIncreaseBtn'), aBall=document.getElementById('aBalloon'),
      aBgLbl=document.getElementById('aBg'), aCount=document.getElementById('aCount'),
      popS=document.getElementById('popSnd');
    let aCountNum=0, aInt=null;
    function aUpdate(){
      aBgLbl.textContent=aCountNum; aCount.textContent=aCountNum;
      let size=120 + aCountNum;
      if(size>=220){ aBall.classList.add('pop'); popS.currentTime=0; popS.play(); aCountNum=0;
        setTimeout(()=>{aBall.classList.remove('pop'); aUpdate();},600); return;
      }
      aBall.style.width=size+'px'; aBall.style.height=(size*1.5)+'px';
    }
    aBtn.onmousedown=()=>{ aUpdate(); aInt=setInterval(aUpdate,200); };
    aBtn.onmouseup=aBtn.onmouseleave=()=>clearInterval(aInt);
  </script>
</body>
</html>
