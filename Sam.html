<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plastic Journey</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;800&family=Bangers&display=swap');

        body {
            font-family: 'Kanit', sans-serif;
            overflow: hidden;
            background-color: #000;
        }

        /* --- Premium Aurora Background --- */
        .aurora-bg {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(125deg, #240b36 0%, #c31432 50%, #240b36 100%); 
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            z-index: -2;
            transition: opacity 1s ease;
        }
        
        .aurora-overlay {
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0) 0%, rgba(0,0,0,0.6) 100%);
            z-index: -1;
            transition: opacity 1s ease;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- UI Components --- */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        .custom-radio-container {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .custom-radio-container:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }
        .custom-radio-container.selected {
            background-color: rgba(255, 255, 255, 0.2);
            border-color: #fb7185;
            box-shadow: 0 0 20px rgba(251, 113, 133, 0.4);
        }

        .check-circle { transition: all 0.3s ease; }
        .check-fill { transform: scale(0); transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .selected .check-fill { transform: scale(1); }
        .selected .check-circle { border-color: #fb7185; background-color: white; }
        .selected .check-fill i { color: #be123c; } 

        select option { background-color: #240b36; color: white; }
        .other-input-container {
            max-width: 0; overflow: hidden; opacity: 0;
            transition: max-width 0.4s ease-out, opacity 0.4s ease-in;
        }
        .other-input-container.show { max-width: 200px; opacity: 1; margin-left: 1rem; }

        /* --- Transitions --- */
        .fade-transition { transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out; }
        .state-hidden { opacity: 0 !important; pointer-events: none !important; transform: scale(0.95); }
        .state-visible { opacity: 1 !important; pointer-events: auto !important; transform: scale(1); }

        /* --- Animations --- */
        @keyframes zoomOutEntrance {
            0% { transform: scale(4); opacity: 0; filter: blur(20px); }
            100% { transform: scale(1); opacity: 1; filter: blur(0); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .animate-zoom-out { animation: zoomOutEntrance 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        .animate-float { animation: float 4s ease-in-out infinite; }

        /* --- SHATTER EFFECT --- */
        @keyframes shatter {
            0% { transform: translate(0, 0) rotate(0deg) scale(1); }
            10% { transform: translate(-10px, -10px) rotate(-5deg); }
            20% { transform: translate(10px, 10px) rotate(5deg); }
            30% { transform: translate(-20px, 20px) rotate(-10deg) scale(1.1); opacity: 1; }
            100% { transform: translate(0, 0) scale(3); opacity: 0; filter: blur(10px); }
        }
        .shatter-active { animation: shatter 0.8s ease-in forwards; }

        /* --- SCREEN SHAKE (On Impact) --- */
        @keyframes shake-hard {
            0% { transform: translate(0, 0) rotate(0deg); }
            20% { transform: translate(-20px, 20px) rotate(-5deg); }
            40% { transform: translate(20px, -20px) rotate(5deg); }
            60% { transform: translate(-20px, -20px) rotate(-5deg); }
            80% { transform: translate(20px, 20px) rotate(5deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
        .shake-screen {
            animation: shake-hard 0.3s ease-in-out;
        }

        /* --- RICK ROLL VISUALS --- */
        #rick-roll-visual {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 100;
            display: none;
            background-image: url('https://media.giphy.com/media/Ju7l5y9osyymQ/giphy.gif');
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
        }

        .rick-text-container {
            position: absolute; inset: 0; pointer-events: none;
            overflow: hidden; /* Ensure text doesn't cause scrollbars during shake */
        }

        .rick-text {
            font-family: 'Bangers', cursive;
            position: absolute;
            color: #fbbf24; /* Amber-400 */
            -webkit-text-stroke: 3px #000;
            font-size: 8rem;
            line-height: 1;
            text-shadow: 
                5px 5px 0px #000, 
                10px 10px 0px #ef4444; /* Red shadow */
            transform: scale(3); /* Start HUGE */
            opacity: 0;
            transition: transform 0.1s ease-out, opacity 0.1s ease-out;
            z-index: 150;
        }

        /* Impact Class applied when text lands */
        .text-landed {
            opacity: 1;
            transform: scale(1) rotate(var(--rot));
        }

        /* Crack Graphic */
        .crack-graphic {
            position: absolute;
            width: 300px;
            height: 300px;
            pointer-events: none;
            z-index: 140; /* Behind text */
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.5);
            transition: opacity 0.1s, transform 0.1s;
        }
        .crack-visible {
            opacity: 0.8;
            transform: translate(-50%, -50%) scale(1.5);
        }

        /* Invisible Audio Player */
        #audio-controller {
            position: absolute; top: -9999px; left: -9999px; opacity: 0;
        }
    </style>
</head>
<body id="main-body" class="h-screen flex items-center justify-center relative select-none overflow-hidden">

    <div class="aurora-bg"></div>
    <div class="aurora-overlay"></div>

    <!-- RICK ROLL LAYER -->
    <div id="rick-roll-visual">
        <div id="rick-text-layer" class="rick-text-container"></div>
    </div>
    
    <!-- Hidden Audio Embed -->
    <div id="audio-controller"></div>

    <!-- SCREEN 1: Intro -->
    <div id="intro-screen" class="absolute inset-0 flex flex-col items-center justify-center fade-transition z-30">
        <h1 id="intro-title" class="text-7xl md:text-9xl font-bold text-white drop-shadow-[0_0_30px_rgba(255,255,255,0.5)] animate-zoom-out tracking-tighter">
            โปรเจค
        </h1>
        <button id="start-btn" onclick="startFlow()" class="mt-16 state-hidden transition-all duration-500 transform hover:scale-105 bg-white text-rose-600 font-bold py-4 px-12 rounded-full shadow-[0_0_40px_rgba(255,255,255,0.4)] tracking-widest text-xl">
            START
        </button>
    </div>

    <!-- SCREEN 2: Province Selector -->
    <div id="province-screen" class="absolute inset-0 flex flex-col items-center justify-center fade-transition state-hidden z-20" style="display: none;">
        <div class="glass-card p-10 rounded-3xl w-11/12 max-w-md text-center transition-transform hover:scale-[1.01]">
            <h2 class="text-3xl md:text-4xl font-bold mb-8 text-white drop-shadow-md">
                อยู่จังหวัดอะไร?
            </h2>
            <div class="relative mb-8 group">
                <select id="province-select" class="block w-full appearance-none bg-white/10 border-2 border-white/20 hover:border-white/50 text-white py-4 px-5 pr-8 rounded-2xl leading-tight focus:outline-none focus:bg-white/20 focus:border-rose-400 transition-all cursor-pointer text-xl font-light shadow-inner">
                    <option value="" disabled selected>Select a province...</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-white">
                    <i class="fas fa-chevron-down group-hover:translate-y-1 transition-transform"></i>
                </div>
            </div>
            <button onclick="confirmProvince()" class="w-full bg-gradient-to-r from-rose-500 to-orange-500 hover:from-rose-600 hover:to-orange-600 text-white font-bold py-4 px-6 rounded-2xl transition-all transform active:scale-95 shadow-lg text-lg">
                NEXT <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </div>

    <!-- SCREEN 3: Narrative Typing -->
    <div id="narrative-screen" class="absolute inset-0 flex flex-col items-center justify-center fade-transition state-hidden pointer-events-none z-20 px-6 text-center" style="display: none;">
        <h2 id="narrative-text" class="text-4xl md:text-6xl font-semibold leading-relaxed text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]"></h2>
    </div>

    <!-- SCREEN 4: Question -->
    <div id="question-screen" class="absolute inset-0 flex flex-col items-center justify-center fade-transition state-hidden pointer-events-none z-10" style="display: none;">
        <h2 id="final-question-text" class="text-3xl md:text-5xl font-bold mb-8 text-center text-white drop-shadow-lg zoom-back-text px-4 leading-tight">
            <!-- Text typed via JS -->
        </h2>

        <div id="options-container" class="flex flex-col gap-4 w-11/12 max-w-md state-hidden transition-opacity duration-1000 delay-300">
            <!-- Options -->
            <div onclick="selectOption(this, '1-10')" class="custom-radio-container glass-card p-4 rounded-2xl flex items-center cursor-pointer group">
                <div class="check-circle w-10 h-10 rounded-full border-2 border-white/60 flex items-center justify-center mr-5 relative overflow-hidden bg-transparent">
                    <div class="check-fill absolute inset-0 bg-white flex items-center justify-center">
                        <i class="fas fa-check text-lg"></i>
                    </div>
                </div>
                <span class="text-2xl font-medium text-white">1-10</span>
            </div>

            <div onclick="selectOption(this, '11-20')" class="custom-radio-container glass-card p-4 rounded-2xl flex items-center cursor-pointer group">
                <div class="check-circle w-10 h-10 rounded-full border-2 border-white/60 flex items-center justify-center mr-5 relative overflow-hidden bg-transparent">
                    <div class="check-fill absolute inset-0 bg-white flex items-center justify-center">
                        <i class="fas fa-check text-lg"></i>
                    </div>
                </div>
                <span class="text-2xl font-medium text-white">11-20</span>
            </div>

            <div onclick="selectOption(this, '21-30')" class="custom-radio-container glass-card p-4 rounded-2xl flex items-center cursor-pointer group">
                <div class="check-circle w-10 h-10 rounded-full border-2 border-white/60 flex items-center justify-center mr-5 relative overflow-hidden bg-transparent">
                    <div class="check-fill absolute inset-0 bg-white flex items-center justify-center">
                        <i class="fas fa-check text-lg"></i>
                    </div>
                </div>
                <span class="text-2xl font-medium text-white">21-30</span>
            </div>

            <div onclick="selectOption(this, 'other')" class="custom-radio-container glass-card p-4 rounded-2xl flex items-center cursor-pointer group">
                <div class="check-circle w-10 h-10 rounded-full border-2 border-white/60 flex items-center justify-center mr-5 relative overflow-hidden bg-transparent">
                    <div class="check-fill absolute inset-0 bg-white flex items-center justify-center">
                        <i class="fas fa-check text-lg"></i>
                    </div>
                </div>
                <span class="text-2xl font-medium text-white">อื่นๆ</span>
                <div class="other-input-container">
                    <input type="text" placeholder="ระบุจำนวน..." class="bg-transparent border-b-2 border-white/50 text-white placeholder-white/60 focus:outline-none focus:border-white w-full py-1 text-xl font-light">
                </div>
            </div>
        </div>
    </div>

    <!-- Final NEXT Button (Bottom Right) -->
    <button id="final-next-btn" onclick="triggerRickRoll()" class="fixed bottom-8 right-8 z-50 state-hidden bg-white text-rose-600 font-bold py-3 px-8 rounded-full shadow-[0_0_25px_rgba(255,255,255,0.6)] hover:scale-110 transition-all duration-300 text-lg flex items-center gap-2">
        NEXT <i class="fas fa-play"></i>
    </button>

    <script>
        // --- Data & Helpers ---
        const thaiProvinces = ["Bangkok","Amnat Charoen","Ang Thong","Bueng Kan","Buriram","Chachoengsao","Chai Nat","Chaiyaphum","Chanthaburi","Chiang Mai","Chiang Rai","Chonburi","Chumphon","Kalasin","Kamphaeng Phet","Kanchanaburi","Khon Kaen","Krabi","Lampang","Lamphun","Loei","Lopburi","Mae Hong Son","Maha Sarakham","Mukdahan","Nakhon Nayok","Nakhon Pathom","Nakhon Phanom","Nakhon Ratchasima","Nakhon Sawan","Nakhon Si Thammarat","Nan","Narathiwat","Nong Bua Lamphu","Nong Khai","Nonthaburi","Pathum Thani","Pattani","Phang Nga","Phatthalung","Phayao","Phetchabun","Phetchaburi","Phichit","Phitsanulok","Phra Nakhon Si Ayutthaya","Phrae","Phuket","Prachinburi","Prachuap Khiri Khan","Ranong","Ratchaburi","Rayong","Roi Et","Sa Kaeo","Sakon Nakhon","Samut Prakan","Samut Sakhon","Samut Songkhram","Saraburi","Satun","Sing Buri","Sisaket","Songkhla","Sukhothai","Suphan Buri","Surat Thani","Surin","Tak","Trang","Trat","Ubon Ratchathani","Udon Thani","Uthai Thani","Uttaradit","Yala","Yasothon"].sort();
        const mainBody = document.getElementById('main-body');

        // --- Init ---
        window.addEventListener('DOMContentLoaded', () => {
            const selectElement = document.getElementById('province-select');
            thaiProvinces.forEach(p => {
                const opt = document.createElement('option');
                opt.value = p;
                opt.textContent = p;
                selectElement.appendChild(opt);
            });
            setTimeout(() => {
                const h1 = document.getElementById('intro-title');
                const btn = document.getElementById('start-btn');
                h1.classList.remove('animate-zoom-out');
                h1.classList.add('animate-float');
                btn.classList.remove('state-hidden');
                btn.classList.add('state-visible');
            }, 1200);
        });

        // --- Flow Logic ---
        function fadeOut(el) {
            el.classList.remove('state-visible'); el.classList.add('state-hidden');
            return new Promise(r => setTimeout(() => { el.style.display = 'none'; r(); }, 600));
        }
        function fadeIn(el) {
            el.style.display = 'flex';
            requestAnimationFrame(() => { el.classList.remove('state-hidden'); el.classList.add('state-visible'); });
        }
        function startFlow() { fadeOut(document.getElementById('intro-screen')).then(() => fadeIn(document.getElementById('province-screen'))); }
        
        function confirmProvince() {
            const select = document.getElementById('province-select');
            if(!select.value) { select.parentElement.classList.add('animate-bounce'); setTimeout(() => select.parentElement.classList.remove('animate-bounce'),500); return; }
            fadeOut(document.getElementById('province-screen')).then(startNarrativeSequence);
        }

        const narrativeText = document.getElementById('narrative-text');
        const sentences = ["เคยใช้ภาชนะพลาสติกไหม?…", "ถ้าเคยงั้นลองตอบหน่อยครับ", "คุณใช้พลาสติกต่อวันประมาณเท่าไหร่หรอครับ?"];

        async function startNarrativeSequence() {
            fadeIn(document.getElementById('narrative-screen'));
            await typeSentence(sentences[0]); await wait(1200); await fadeTextOnly();
            await typeSentence(sentences[1]); await wait(1200); await fadeTextOnly();
            fadeOut(document.getElementById('narrative-screen')).then(showFinalQuestionScreen);
        }

        function typeSentence(text) {
            return new Promise(r => {
                narrativeText.textContent = ""; narrativeText.style.opacity = 1;
                let i=0; const f = () => { if(i<text.length) { narrativeText.textContent+=text.charAt(i++); setTimeout(f,50); } else r(); };
                f();
            });
        }
        function fadeTextOnly() { return new Promise(r => { narrativeText.style.opacity = 0; setTimeout(() => { narrativeText.textContent=""; r(); }, 600); }); }
        function wait(ms) { return new Promise(r => setTimeout(r, ms)); }

        function showFinalQuestionScreen() {
            const qs = document.getElementById('question-screen');
            fadeIn(qs);
            const ft = document.getElementById('final-question-text');
            ft.textContent=""; let t=sentences[2],i=0;
            const f = () => { if(i<t.length) { ft.textContent+=t.charAt(i++); setTimeout(f,40); } else {
                setTimeout(() => { ft.classList.add('zoomed-back'); document.getElementById('options-container').classList.remove('state-hidden'); document.getElementById('options-container').classList.add('state-visible'); },400);
            }}; f();
        }

        function selectOption(el, val) {
            document.querySelectorAll('.custom-radio-container').forEach(o => { o.classList.remove('selected'); const i=o.querySelector('.other-input-container'); if(i) i.classList.remove('show'); });
            el.classList.add('selected');
            if(val==='other') { const c = el.querySelector('.other-input-container'); if(c) { c.classList.add('show'); setTimeout(()=>c.querySelector('input').focus(),400); }}
            const b = document.getElementById('final-next-btn'); b.classList.remove('state-hidden'); b.classList.add('state-visible');
        }

        // --- RICK ROLL LOGIC ---
        
        // SVG Crack Path data
        const crackSVG = `<svg viewBox="0 0 100 100" class="w-full h-full text-white fill-current"><path d="M48,50 L40,30 L45,45 L20,40 L45,52 L30,70 L50,55 L60,80 L55,52 L80,50 L52,48 L70,30 L50,45 Z M48,50 L50,45" stroke="white" stroke-width="2" fill="none"/></svg>`;

        function triggerRickRoll() {
            // 1. Shatter
            document.getElementById('question-screen').classList.add('shatter-active');
            document.getElementById('final-next-btn').style.display='none';
            document.querySelector('.aurora-bg').style.opacity='0';
            document.querySelector('.aurora-overlay').style.opacity='0';

            // 2. Show GIF & Audio
            const rv = document.getElementById('rick-roll-visual');
            rv.style.display='block';
            document.getElementById('audio-controller').innerHTML = '<iframe width="10" height="10" src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&loop=1&playlist=dQw4w9WgXcQ" allow="autoplay"></iframe>';

            // 3. Cleanup
            setTimeout(() => { 
                document.getElementById('question-screen').style.display='none';
                document.getElementById('intro-screen').style.display='none';
            }, 800);

            // 4. Timed Text Impacts
            // YOU: Top Left, Tilt Left
            setTimeout(() => hitText("YOU", "10%", "10%", "-15deg"), 800);
            
            // GOT: Middle Right, Tilt Right
            setTimeout(() => hitText("GOT", "40%", null, "15deg", "10%"), 1600);
            
            // RICK: Lower Middle Left, Tilt Left
            setTimeout(() => hitText("RICK", "60%", "20%", "-10deg"), 2400);
            
            // ROLLED: Bottom Center, Straight
            setTimeout(() => hitText("ROLLED", "80%", "50%", "0deg", null, true), 3200);
        }

        function hitText(word, top, left, rotation, right=null, centered=false) {
            const layer = document.getElementById('rick-text-layer');
            const el = document.createElement('div');
            el.classList.add('rick-text');
            el.textContent = word;

            // Positioning
            el.style.top = top;
            if(left) el.style.left = left;
            if(right) el.style.right = right;
            
            // Initial transform vars
            el.style.setProperty('--rot', rotation);
            
            if(centered) {
                el.style.transform = `translateX(-50%) scale(3)`;
                el.style.left = "50%"; // Force center for last word
            } else {
                el.style.transform = `scale(3) rotate(${rotation})`;
            }

            // Create Crack underneath
            const crack = document.createElement('div');
            crack.classList.add('crack-graphic');
            crack.innerHTML = crackSVG;
            // Position crack relative to screen percentage
            crack.style.top = top;
            crack.style.left = centered ? "50%" : (left ? left : "auto");
            if(right && !centered) crack.style.right = right;
            
            layer.appendChild(crack);
            layer.appendChild(el);

            // Trigger Animation (Next Frame)
            requestAnimationFrame(() => {
                // Slam Text
                if(centered) el.style.transform = `translateX(-50%) scale(1)`;
                else el.style.transform = `scale(1) rotate(${rotation})`;
                el.style.opacity = '1';

                // Show Crack
                crack.classList.add('crack-visible');

                // Shake Screen
                shakeScreen();
            });
        }

        function shakeScreen() {
            mainBody.classList.remove('shake-screen');
            void mainBody.offsetWidth; // Trigger reflow
            mainBody.classList.add('shake-screen');
        }

    </script>
</body>
</html>
