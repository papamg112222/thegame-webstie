<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gas Laws Simulator</title>
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%; width: 100%;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    .menu-container, .mode-screen {
      display: none; flex-direction: column;
      align-items: center; justify-content: center;
      height: 100vh; width: 100vw; box-sizing: border-box;
    }
    .menu-container {
      display: flex;
      background: rgba(255,255,255,0.85);
      padding: 40px; border-radius: 12px;
      gap: 1cm; text-align: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    .menu-title {
      font-size: 48px; font-weight: bold; margin-bottom: 30px;
    }
    .menu-title span:first-child { color: #0097a7; }
    .menu-title span:last-child { color: #fdd835; }
    .menu-button {
      padding:15px 30px; font-size:18px;
      background:#0097a7; color:white; border:none; border-radius:8px;
      cursor:pointer; transition:0.3s, transform 0.2s ease;
    }
    .menu-button:hover { background:#006064; transform:scale(1.1); }
    .mode-screen {
      display: flex;
      position: relative;
      background: rgba(50,50,50,0.9);
      color: white; text-align: center; padding: 20px;
      box-sizing: border-box;
    }
    .return-button {
      padding:10px 20px; font-size:16px;
      background:white; color:black; border:none;
      border-radius:5px; cursor:pointer; margin-top:20px;
    }
    .return-button:hover { background:#f0cece; }

    /* Avogadro Mode */
    #avogadroContainer {
      display: none;
      position: relative;
      width: 100%; height: 80%;
      overflow: hidden;
    }
    #snakeCanvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #111;
    }
    #avogadroBalloon {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle at center, #4caf50, #087f23);
      border-radius: 50%/60%;
      width: 80px; height: 110px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      transition: width 0.3s ease, height 0.3s ease;
      z-index: 2;
    }
    #avogadroControls {
      z-index: 3;
      position: absolute;
      bottom: 10px; left: 50%;
      transform: translateX(-50%);
      text-align: center;
    }
    #increaseButton {
      padding:12px 24px; font-size:16px;
      background:#4caf50; color:white; border:none; border-radius:8px;
      cursor:pointer;
    }
    #increaseButton:hover { background:#2e7d32; }
    #nValueDisplay {
      margin-top:10px; font-size:18px; color:#fff;
    }
  </style>
</head>
<body>

  <div class="menu-container" id="mainMenu">
    <div class="menu-title"><span>Chem</span><span>istry</span></div>
    <button class="menu-button" onclick="showMode('Avogadro\'s Law Mode')">Avogadro's Law Mode</button>
  </div>

  <div class="mode-screen" id="modeScreen">
    <h1 id="modeTitle">Mode</h1>

    <div id="avogadroContainer">
      <canvas id="snakeCanvas"></canvas>
      <div id="avogadroBalloon"></div>
      <div id="avogadroControls">
        <button id="increaseButton" onclick="increaseMoles()">Increase Mass (n)</button>
        <p id="nValueDisplay">Current n: <span id="nValue">1</span></p>
      </div>
    </div>

    <button class="return-button" onclick="returnToMenu()">Return</button>
  </div>

  <script>
  // Navigation
  const mainMenu = document.getElementById('mainMenu');
  const modeScreen = document.getElementById('modeScreen');
  const modeTitle = document.getElementById('modeTitle');
  const avogadroContainer = document.getElementById('avogadroContainer');
  const avogadroBalloon = document.getElementById('avogadroBalloon');
  const nValueSpan = document.getElementById('nValue');
  let n = 1;

  function increaseMoles() {
    n++;
    const base = 80, size = base + n * 10;
    avogadroBalloon.style.width = `${size}px`;
    avogadroBalloon.style.height = `${size * 1.375}px`;
    nValueSpan.textContent = n;
  }

  function showMode(name) {
    mainMenu.style.display = 'none';
    modeScreen.style.display = 'flex';
    modeTitle.textContent = name;
    if (name === "Avogadro's Law Mode") {
      avogadroContainer.style.display = 'block';
      n = 1; increaseMoles();
      startSnake();
    }
  }

  function returnToMenu() {
    modeScreen.style.display = 'none';
    mainMenu.style.display = 'flex';
    stopSnake();
  }

  // 🐍 Snake Game in Circular Infinite Wrap
  const canvas = document.getElementById('snakeCanvas');
  const ctx = canvas.getContext('2d');
  let snake, dir, food, snakeTimer;

  function resizeCanvas() {
    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;
  }
  window.addEventListener('resize', resizeCanvas);

  function startSnake() {
    resizeCanvas();
    snake = [{x:10, y:10}];
    dir = {x:1, y:0};
    placeFood();
    snakeTimer = setInterval(gameStep, 100);
    document.addEventListener('keydown', keyHandler);
  }

  function stopSnake() {
    clearInterval(snakeTimer);
    document.removeEventListener('keydown', keyHandler);
  }

  function keyHandler(e) {
    if (e.key === 'ArrowUp' && dir.y === 0) dir = {x:0, y:-1};
    if (e.key === 'ArrowDown' && dir.y === 0) dir = {x:0, y:1};
    if (e.key === 'ArrowLeft' && dir.x === 0) dir = {x:-1, y:0};
    if (e.key === 'ArrowRight' && dir.x === 0) dir = {x:1, y:0};
  }

  function placeFood() {
    const gridSize = 20;
    food = {
      x: Math.floor(Math.random() * (canvas.width / gridSize)),
      y: Math.floor(Math.random() * (canvas.height / gridSize))
    };
  }

  function gameStep() {
    const grid = 20;
    const head = {...snake[0], x: snake[0].x + dir.x, y: snake[0].y + dir.y};

    // wrap around infinite circle
    head.x = (head.x + canvas.width / grid) % (canvas.width / grid);
    head.y = (head.y + canvas.height / grid) % (canvas.height / grid);

    snake.unshift(head);
    if (head.x === food.x && head.y === food.y) {
      placeFood();
    } else {
      snake.pop();
    }

    // draw
    ctx.fillStyle = '#111';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = '#0f0';
    snake.forEach(p => ctx.fillRect(p.x*grid, p.y*grid, grid-2, grid-2));
    ctx.fillStyle = '#f00';
    ctx.fillRect(food.x*grid, food.y*grid, grid-2, grid-2);
  }
  </script>
</body>
</html>
