<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gas Laws Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap');

    /* Base styles & main menu */
    html, body { margin:0; padding:0; height:100%; font-family:'Montserrat',sans-serif; background:#1a0a3a; overflow:hidden; color:white; }
    #particleCanvas { position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;pointer-events:none; }
    #mainMenu { position:relative; z-index:1; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; }
    #mainMenu h1 { font-weight:600; font-size:4rem; margin-bottom:0.3em; letter-spacing:5px; color:#ff5a5f; }
    #mainMenu h3 { font-weight:300; font-size:1.2rem; margin-bottom:2em; color:#ff7a7f; }
    #mainMenu button { background:#ff5a5f; border:none; border-radius:50px; color:white; font-size:1.5rem; padding:16px 80px; margin:12px 0; cursor:pointer; box-shadow:0 4px 8px rgba(255,90,95,0.4); transition:background-color .3s; }
    #mainMenu button:hover { background:#ff7a7f; }

    /* Gameplay screens */
    .gameMode { display:none; position:relative; z-index:2; height:100vh; padding:20px; background:#111; overflow:auto; box-sizing:border-box; }
    .return-btn { margin-top:20px; padding:10px 20px; font-size:16px; background:#ff5a5f; color:white; border:none; border-radius:5px; cursor:pointer; }

    /* Shared game elements */
    .slider-container { margin:20px auto; width:300px; color:#ff5a5f; }
    .slider-container label { display:block; margin-bottom:6px; font-weight:600; }
    input[type=range] { width:100%; }
    .balloon-container { position:relative; width:200px; height:250px; margin:20px auto; }
    .balloon { background:#ff5a5f; border-radius:50%/60%; margin:0 auto; transition:width .3s, height .3s, background-color .3s; }
    .molecule-teller-bg, .molecule-counter { position:absolute; top:10px; left:50%; transform:translateX(-50%); text-shadow:0 0 10px rgba(255,255,255,0.7); }
    .molecule-teller-bg { font-size:200px; font-weight:900; opacity:0.1; letter-spacing:20px; }
    .molecule-counter { font-size:48px; font-weight:600; }

    /* Avogadro specifics */
    .avogadro-increase-btn { background:#ff5a5f; border:none; border-radius:30px; color:white; font-size:1.3rem; padding:12px 30px; cursor:pointer; display:block; margin:10px auto; box-shadow:0 3px 7px rgba(255,90,95,0.5); transition:background-color .3s; }
    .avogadro-increase-btn:hover { background:#ff7a7f; }
    @keyframes popAnimation { 0%{transform:scale(1);opacity:1;} 50%{transform:scale(1.4);opacity:0.8;} 100%{transform:scale(0);opacity:0;} }
    .pop { animation:popAnimation .5s forwards; }
  </style>
</head>
<body>

  <canvas id="particleCanvas"></canvas>

  <!-- MAIN MENU -->
  <div id="mainMenu">
    <h1>GAS LAWS GAME</h1>
    <h3>Choose your mode</h3>
    <button onclick="showMode('boyle')">Boyle's Law</button>
    <button onclick="showMode('charles')">Charles' Law</button>
    <button onclick="showMode('gayLussac')">Gay‑Lussac's Law</button>
    <button onclick="showMode('avogadro')">Avogadro's Law</button>
  </div>

  <!-- BOYLE -->
  <div id="boyle" class="gameMode">
    <h2>Boyle's Law</h2>
    <div class="slider-container"><label>Volume (V): <span id="boyleVolumeVal">50</span></label><input type="range" id="boyleVolume" min="10" max="100" value="50"></div>
    <div class="slider-container"><label>Mass (m): <span id="boyleMassVal">1.0</span></label><input type="range" id="boyleMass" min="1" max="10" step="0.1" value="1"></div>
    <div class="slider-container"><label>Temperature (T): <span id="boyleTempVal">20</span> °C</label><input type="range" id="boyleTemp" min="0" max="100" value="20"></div>
    <div class="balloon-container"><div id="boyleBalloon" class="balloon"></div></div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- CHARLES -->
  <div id="charles" class="gameMode">
    <h2>Charles' Law</h2>
    <div class="balloon-container">
      <div id="charlesBalloon" class="balloon"></div>
      <div id="charlesMoleculeBg" class="molecule-teller-bg">100</div>
    </div>
    <div class="slider-container"><label>Temperature (T): <span id="charlesTempVal">20</span> °C</label><input type="range" id="charlesTemp" min="0" max="100" value="20"></div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- GAY-LUSSAC -->
  <div id="gayLussac" class="gameMode">
    <h2>Gay‑Lussac's Law</h2>
    <div class="balloon-container"><div id="gayLussacBalloon" class="balloon"></div></div>
    <div class="slider-container"><label>Pressure (P): <span id="gayLussacPressureVal">1</span></label><input type="range" id="gayLussacPressure" min="1" max="10" value="1"></div>
    <div class="slider-container"><label>Temperature (T): <span id="gayLussacTempVal">20</span> °C</label><input type="range" id="gayLussacTemp" min="0" max="100" value="20"></div>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <!-- AVOGADRO -->
  <div id="avogadro" class="gameMode">
    <h2>Avogadro's Law</h2>
    <div class="balloon-container">
      <div id="avogadroBalloon" class="balloon"></div>
      <div id="avogadroMoleculeBg" class="molecule-teller-bg">0</div>
      <div id="avogadroMoleculeCount" class="molecule-counter">0</div>
    </div>
    <button id="increaseMoleculeBtn" class="avogadro-increase-btn">Add Molecules</button>
    <button class="return-btn" onclick="returnToMenu()">Return to Menu</button>
  </div>

  <script>
    // === Animated Particles Background ===
    const canvas = document.getElementById('particleCanvas'), ctx = canvas.getContext('2d');
    let particles = [], width, height;
    function initParticles() {
      width = window.innerWidth; height = window.innerHeight;
      canvas.width = width; canvas.height = height;
      particles = [];
      for (let i = 0; i < 80; i++) {
        particles.push({
          x: Math.random()*width,
          y: Math.random()*height,
          radius: Math.random()*6 + 2,
          speedY: Math.random()*1.5 + 0.5,
          speedX: (Math.random()-0.5)*0.5,
          color: '#ff5a5f',
          alpha: Math.random()*0.5 + 0.3,
          type: Math.random() > 0.5 ? 'circle' : 'atom'
        });
      }
    }

    function drawAtom(x, y, r) {
      ctx.strokeStyle = '#ff7a7f';
      ctx.lineWidth = 1.2;
      ctx.beginPath(); ctx.arc(x, y, r*0.6, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(255,122,127,0.8)'; ctx.fill(); ctx.closePath();
      ctx.beginPath(); ctx.ellipse(x, y, r*1.2, r*0.5, 0, 0, Math.PI*2); ctx.stroke();
      ctx.beginPath(); ctx.ellipse(x, y, r*0.5, r*1.2, Math.PI/4, 0, Math.PI*2); ctx.stroke();
    }

    function animateParticles() {
      ctx.clearRect(0, 0, width, height);
      particles.forEach(p => {
        p.y += p.speedY;
        p.x += p.speedX;
        if (p.y - p.radius > height) p.y = -p.radius;
        if (p.x - p.radius > width) p.x = -p.radius;
        if (p.x + p.radius < 0) p.x = width + p.radius;
        ctx.globalAlpha = p.alpha;
        if (p.type === 'circle') {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.radius, 0, Math.PI*2);
          ctx.fillStyle = p.color;
          ctx.fill();
        } else {
          drawAtom(p.x, p.y, p.radius);
        }
      });
      ctx.globalAlpha = 1;
      requestAnimationFrame(animateParticles);
    }

    window.addEventListener('resize', initParticles);
    initParticles(); animateParticles();

    // === Navigation ===
    const modes = ['boyle', 'charles', 'gayLussac', 'avogadro'];
    function showMode(id) {
      document.getElementById('mainMenu').style.display = 'none';
      modes.forEach(m => document.getElementById(m).style.display = 'block');
      if (id === 'boyle') setupBoyle();
      if (id === 'charles') setupCharles();
      if (id === 'gayLussac') setupGayLussac();
      if (id === 'avogadro') setupAvogadro();
    }
    function returnToMenu() {
      document.getElementById('mainMenu').style.display = 'flex';
      modes.forEach(m => document.getElementById(m).style.display = 'none');
    }

    // === Boyle’s Law ===
    const bv = document.getElementById('boyleVolume'),
          bm = document.getElementById('boyleMass'),
          bt = document.getElementById('boyleTemp'),
          bvV = document.getElementById('boyleVolumeVal'),
          bmV = document.getElementById('boyleMassVal'),
          btV = document.getElementById('boyleTempVal'),
          bb = document.getElementById('boyleBalloon');
    function setupBoyle() {
      bv.oninput = bm.oninput = bt.oninput = updateBoyle;
      updateBoyle();
    }
    function updateBoyle() {
      const v = +bv.value, m = +bm.value, t = +bt.value;
      bvV.textContent = v;
      bmV.textContent = m.toFixed(1);
      btV.textContent = t;
      const w = 50 + v * 1.5;
      const h = 75 + v * 2;
      bb.style.width = w + 'px';
      bb.style.height = h + 'px';
      bb.style.backgroundColor = `rgba(255,90,95,${0.5 + t/200})`;
    }

    // === Charles’s Law ===
    const ct = document.getElementById('charlesTemp'),
          ctV = document.getElementById('charlesTempVal'),
          cb = document.getElementById('charlesBalloon'),
          cBg = document.getElementById('charlesMoleculeBg');
    function setupCharles() {
      ct.oninput = updateCharles;
      updateCharles();
    }
    function updateCharles() {
      const t = +ct.value;
      ctV.textContent = t;
      const vol = 50 + t * 2.5;
      cb.style.width = vol + 'px';
      cb.style.height = (vol * 1.5) + 'px';
      cBg.textContent = Math.floor(vol / 2);
    }

    // === Gay-Lussac’s Law ===
    const gp = document.getElementById('gayLussacPressure'),
          gpV = document.getElementById('gayLussacPressureVal'),
          gt = document.getElementById('gayLussacTemp'),
          gtV = document.getElementById('gayLussacTempVal'),
          gb = document.getElementById('gayLussacBalloon');
    function setupGayLussac() {
      gp.oninput = gt.oninput = updateGayLussac;
      updateGayLussac();
    }
    function updateGayLussac() {
      const p = +gp.value, t = +gt.value;
      gpV.textContent = p;
      gtV.textContent = t;
      let size = 100 * p / (t + 273);
      size = Math.max(50, Math.min(150, size));
      gb.style.width = size + 'px';
      gb.style.height = (size * 1.5) + 'px';
      const intensity = Math.min(1, p / 10);
      gb.style.backgroundColor = `rgba(255,${90 + intensity * 100},95,0.8)`;
    }

    // === Avogadro’s Law ===
    const ab = document.getElementById('avogadroBalloon'),
          aBg = document.getElementById('avogadroMoleculeBg'),
          aCt = document.getElementById('avogadroMoleculeCount'),
          aiBtn = document.getElementById('increaseMoleculeBtn');
    let moleculeCount = 0;
    function setupAvogadro() {
      moleculeCount = 0;
      aCt.textContent = 0;
      aBg.textContent = 0;
      ab.style.width = '100px';
      ab.style.height = '150px';
      ab.style.backgroundColor = '#ff5a5f';
      aiBtn.onclick = () => {
        moleculeCount++;
        aCt.textContent = moleculeCount;
        aBg.textContent = moleculeCount * 10;
        ab.classList.add('pop');
        setTimeout(() => {
          ab.classList.remove('pop');
          const w0 = parseInt(ab.style.width), h0 = parseInt(ab.style.height);
          ab.style.width = (w0 + 10) + 'px';
          ab.style.height = (h0 + 15) + 'px';
        }, 500);
      };
    }
  </script>
</body>
</html>
