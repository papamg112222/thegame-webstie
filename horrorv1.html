<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Specimen #966</title>
<style>
  body,html{margin:0;padding:0;overflow:hidden;background:#000;cursor:none;height:100%}
  #warning{position:fixed;bottom:20px;width:100%;text-align:center;color:#500;font-size:14px;opacity:0.6}
  #jump{text-position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);color:#f00;font-size:120px;font-family:Courier New;text-shadow:0 0 30px #f00;opacity:0;transition:opacity 1s}
</style>
</head>
<body>

<div id="warning">WARNING: Prolonged observation may cause irreversible psychological damage.</div>
<div id="jump">IT SEES YOU</div>

<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.module.js';
import {OrbitControls} from 'https://cdn.jsdelivr.net/npm/three@0.168.0/examples/jsm/controls/OrbitControls.js';

const renderer = new THREE.WebGLRenderer({antialias:false});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(1);
document.body.appendChild(renderer.domElement);

const scene = new THREE.Scene();
scene.fog = new THREE.FogExp2(0x000000, 0.0008);

const camera = new THREE.PerspectiveCamera(50, innerWidth/innerHeight, 0.1, 100);
camera.position.set(0,1,5);

const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.03;
controls.minDistance = 2;
controls.maxDistance = 10;

scene.add(new THREE.AmbientLight(0x200000, 0.3));
const redLight = new THREE.PointLight(0x880000, 1, 15);
redLight.position.set(0,2,4);
scene.add(redLight);

// Monster
const geo = new THREE.DodecahedronGeometry(1.3,1);
const mat = new THREE.MeshStandardMaterial({
  color:0x110011, roughness:0.95, metalness:0.05, emissive:0x330000, emissiveIntensity:0.2
});
const monster = new THREE.Mesh(geo, mat);
scene.add(monster);

// Distort vertices
const pos = geo.attributes.position;
for(let i=0;i<pos.count;i++){
  pos.setX(i, pos.getX(i) + (Math.random()-0.5)*0.9);
  pos.setY(i, pos.getY(i) + (Math.random()-0.5)*0.9);
  pos.setZ(i, pos.getZ(i) + (Math.random()-0.5)*0.9);
}
pos.needsUpdate = true;
geo.computeVertexNormals();

// Glowing eyes
const eyeMat = new THREE.MeshBasicMaterial({color:0xff0000});
const eyeL = new THREE.Mesh(new THREE.SphereGeometry(0.14,16,16), eyeMat);
eyeL.position.set(-0.35,0.6,1.1);
const eyeR = eyeL.clone();
eyeR.position.x = 0.35;
monster.add(eyeL, eyeR);

let stareTime = 0;
let triggered = false;

// Audio (works after first click)
let audioCtx = null;
document.body.addEventListener('click',()=>{ if(!audioCtx) audioCtx = new AudioContext(); },{once:true});

function jumpscare(){
  if(triggered) return;
  triggered = true;

  // LUNGE
  monster.scale.setScalar(6);
  camera.position.z = 0.3;

  // SCREAM
  if(audioCtx){
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.connect(gain); gain.connect(audioCtx.destination);
    osc.frequency.setValueAtTime(100, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(20, audioCtx.currentTime+2.5);
    gain.gain.setValueAtTime(0.01, audioCtx.currentTime);
    gain.gain.exponentialRampToValue(2, audioCtx.currentTime+0.05);
    gain.gain.exponentialRampToValue(0.01, audioCtx.currentTime+3);
    osc.start(); osc.stop(audioCtx.currentTime+4);
  }

  // Visual chaos
  document.body.style.filter = "invert(1) hue-rotate(180deg)";
  renderer.setPixelRatio(0.1);
  document.getElementById('jump').style.opacity = 1;
  document.body.style.animation = "shake 0.4s infinite";
}

const anim = () =>{
  requestAnimationFrame(anim);

  monster.rotation.y += 0.002;
  monster.rotation.x = Math.sin(Date.now()*0.0004)*0.15;

  const looking = controls.target.distanceTo(monster.position) < 2;
  if(looking){
    stareTime += 0.016;
    const intensity = Math.min(stareTime/8, 4);
    eyeL.material.emissiveIntensity = intensity*2;
    eyeR.material.emissiveIntensity = intensity*2;
    redLight.intensity = 2 + intensity*3;

    if(stareTime > 11) jumpscare();
  }else{
    stareTime = Math.max(stareTime-0.05,0);
  }

  controls.update();
  renderer.render(scene,camera);
};
anim();

window.onresize = ()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};

</script>

<style>
@keyframes shake{
  0%,100%{transform:translate(0,0)}
  10%{transform:translate(-10px,-10px)}
  30%{transform:translate(20px,-15px)}
  50%{transform:translate(-20px,10px)}
  70%{transform:translate(15px,20px)}
  90%{transform:translate(-10px,-15px)}
}
</style>
</body>
</html>
