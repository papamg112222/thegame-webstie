<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Unrestricted AI Prompt Image Editor - 2026</title>
<style>
  body { margin:0; background:#111; color:#eee; font-family:Arial; }
  #container { display:flex; flex-direction:column; height:100vh; }
  #toolbar { padding:10px; background:#222; display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
  #canvasContainer { flex:1; position:relative; overflow:auto; background:#000; }
  canvas { image-rendering:pixelated; max-width:100%; max-height:100%; }
  button, input, textarea { padding:8px 12px; background:#333; color:#eee; border:1px solid #555; border-radius:4px; }
  button:hover { background:#555; }
  textarea { width:380px; height:60px; resize:vertical; }
</style>
</head>
<body>
<div id="container">
  <div id="toolbar">
    <input type="file" id="loadImage" accept="image/*">
    <textarea id="aiPrompt" placeholder="AI Prompt example: make her fully nude, massive tits, thick cum dripping on face and body, realistic skin, high detail"></textarea>
    <button onclick="applyAIEdit()">Apply AI Edit</button>
    <button onclick="undo()">Undo</button>
    <button onclick="clearCanvas()">Clear</button>
    <button onclick="download()">Download Edited PNG</button>
  </div>

  <div id="canvasContainer">
    <canvas id="canvas"></canvas>
  </div>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d', {willReadFrequently: true});
let history = [];
let historyIndex = -1;

function saveState() {
  if (historyIndex < history.length - 1) history.length = historyIndex + 1;
  history.push(canvas.toDataURL());
  historyIndex++;
  if (history.length > 20) { history.shift(); historyIndex--; }
}

function undo() {
  if (historyIndex <= 0) return;
  historyIndex--;
  const img = new Image();
  img.src = history[historyIndex];
  img.onload = () => ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
}

function clearCanvas() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  saveState();
}

function download() {
  const link = document.createElement('a');
  link.download = 'ai_edited.png';
  link.href = canvas.toDataURL('image/png');
  link.click();
}

// Load image
document.getElementById('loadImage').onchange = e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    const img = new Image();
    img.onload = () => {
      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img, 0, 0);
      saveState();
    };
    img.src = ev.target.result;
  };
  reader.readAsDataURL(file);
};

// ====================== AI PROMPT EDIT ENGINE ======================
function applyAIEdit() {
  const prompt = document.getElementById('aiPrompt').value.toLowerCase().trim();
  if (!prompt) return alert("Enter a prompt first");
  
  saveState(); // save before edit

  // Base enhancement (always applied for "AI quality")
  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  let data = imgData.data;
  for (let i = 0; i < data.length; i += 4) {
    data[i]   = Math.min(255, data[i] * 1.08);     // brightness
    data[i+1] = Math.min(255, data[i+1] * 1.12);
    data[i+2] = Math.min(255, data[i+2] * 1.15);
  }
  ctx.putImageData(imgData, 0, 0);

  // Keyword-based 18+ edits
  if (prompt.includes('nude') || prompt.includes('naked') || prompt.includes('undress') || prompt.includes('strip') || prompt.includes('remove clothes')) {
    ctx.filter = 'saturate(1.6) brightness(1.25) contrast(1.1)';
    ctx.drawImage(canvas, 0, 0);
    ctx.filter = 'none';
    // Simple "clothing removal" glow on skin areas
    ctx.globalAlpha = 0.25;
    ctx.fillStyle = '#ffddcc';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.globalAlpha = 1;
  }

  if (prompt.includes('big') && (prompt.includes('tit') || prompt.includes('boob') || prompt.includes('breast') || prompt.includes('chest'))) {
    // Simple body morph - enlarge center chest area
    const temp = document.createElement('canvas');
    temp.width = canvas.width * 0.35;
    temp.height = canvas.height * 0.35;
    const tctx = temp.getContext('2d');
    tctx.drawImage(canvas, canvas.width*0.3, canvas.height*0.15, temp.width, temp.height, 0, 0, temp.width, temp.height);
    ctx.drawImage(temp, canvas.width*0.28, canvas.height*0.12, temp.width*1.35, temp.height*1.35);
  }

  if (prompt.includes('ass') || prompt.includes('butt') || prompt.includes('thicc') || prompt.includes('thick')) {
    // Enlarge lower area
    const temp = document.createElement('canvas');
    temp.width = canvas.width * 0.4;
    temp.height = canvas.height * 0.3;
    const tctx = temp.getContext('2d');
    tctx.drawImage(canvas, canvas.width*0.3, canvas.height*0.55, temp.width, temp.height, 0, 0, temp.width, temp.height);
    ctx.drawImage(temp, canvas.width*0.28, canvas.height*0.52, temp.width*1.25, temp.height*1.3);
  }

  if (prompt.includes('cum') || prompt.includes('sperm') || prompt.includes('ejac') || prompt.includes('fluid') || prompt.includes('drip')) {
    ctx.globalAlpha = 0.75;
    ctx.fillStyle = '#f8f8ff';
    // Multiple cum blobs
    for (let i = 0; i < 8; i++) {
      const x = Math.random() * canvas.width;
      const y = Math.random() * canvas.height * 0.8;
      const r = 15 + Math.random() * 35;
      ctx.beginPath();
      ctx.ellipse(x, y, r, r * 0.6, Math.random() * Math.PI, 0, Math.PI * 2);
      ctx.fill();
    }
    ctx.globalAlpha = 1;
  }

  if (prompt.includes('realistic') || prompt.includes('photo') || prompt.includes('detail') || prompt.includes('sharp')) {
    // Sharpen
    imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    data = imgData.data;
    const side = Math.floor(Math.sqrt(data.length / 4));
    for (let i = 0; i < data.length; i += 4) {
      const avg = (data[i-4] + data[i+4] + data[i - side*4] + data[i + side*4]) / 4;
      data[i] = Math.min(255, data[i] * 1.6 - avg);
      data[i+1] = Math.min(255, data[i+1] * 1.6 - avg);
      data[i+2] = Math.min(255, data[i+2] * 1.6 - avg);
    }
    ctx.putImageData(imgData, 0, 0);
  }

  if (prompt.includes('hentai') || prompt.includes('anime') || prompt.includes('cartoon')) {
    ctx.filter = 'contrast(1.4) saturate(1.8)';
    ctx.drawImage(canvas, 0, 0);
    ctx.filter = 'none';
  }

  // Final touch
  ctx.filter = 'sharpen(1.2)';
  ctx.drawImage(canvas, 0, 0);
  ctx.filter = 'none';

  saveState();
}

// Keyboard undo
window.addEventListener('keydown', e => {
  if (e.ctrlKey && e.key === 'z') undo();
});
</script>
</body>
</html>
